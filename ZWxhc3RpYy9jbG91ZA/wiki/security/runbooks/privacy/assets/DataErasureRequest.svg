<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2726px" preserveAspectRatio="none" style="width:1120px;height:2726px;" version="1.1" viewBox="0 0 1120 2726" width="1120px" zoomAndPan="magnify"><defs><filter height="300%" id="f5g0vw7y76im2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="831" x="13" y="247.7305"/><rect fill="#FFFFFF" height="73.5762" style="stroke: none; stroke-width: 1.0;" width="831" x="13" y="294.3516"/><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="714" x="13" y="411.2383"/><rect fill="#FFFFFF" height="73.5762" style="stroke: none; stroke-width: 1.0;" width="714" x="13" y="457.8594"/><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="1085.5" x="13" y="574.7461"/><rect fill="#FFFFFF" height="73.5762" style="stroke: none; stroke-width: 1.0;" width="1085.5" x="13" y="621.3672"/><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="1085.5" x="13" y="738.2539"/><rect fill="#FFFFFF" height="73.5762" style="stroke: none; stroke-width: 1.0;" width="1085.5" x="13" y="784.875"/><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="714" x="13" y="945.0723"/><rect fill="#FFFFFF" height="73.5762" style="stroke: none; stroke-width: 1.0;" width="714" x="13" y="991.6934"/><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="193.7734" style="stroke: #000000; stroke-width: 2.0;" width="831" x="13" y="1151.8906"/><rect fill="#FFFFFF" height="73.5762" style="stroke: none; stroke-width: 1.0;" width="831" x="13" y="1198.5117"/><rect fill="#FFFFFF" height="73.5762" style="stroke: none; stroke-width: 1.0;" width="831" x="13" y="1272.0879"/><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="249.1289" style="stroke: #000000; stroke-width: 2.0;" width="658" x="440.5" y="1402.9746"/><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="116.8867" style="stroke: #000000; stroke-width: 2.0;" width="176" x="450.5" y="1528.2168"/><rect fill="#FFFFFF" height="57.2656" style="stroke: none; stroke-width: 1.0;" width="176" x="450.5" y="1587.8379"/><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="1085.5" x="13" y="1695.4141"/><rect fill="#FFFFFF" height="73.5762" style="stroke: none; stroke-width: 1.0;" width="1085.5" x="13" y="1742.0352"/><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="193.8184" style="stroke: #000000; stroke-width: 2.0;" width="413.5" x="440.5" y="1902.2324"/><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="133.1973" style="stroke: #000000; stroke-width: 2.0;" width="393.5" x="450.5" y="1955.8535"/><rect fill="#FFFFFF" height="86.5762" style="stroke: none; stroke-width: 1.0;" width="393.5" x="450.5" y="2002.4746"/><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="831" x="13" y="2182.6719"/><rect fill="#FFFFFF" height="73.5762" style="stroke: none; stroke-width: 1.0;" width="831" x="13" y="2229.293"/><rect fill="#FFFFFF" filter="url(#f5g0vw7y76im2)" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="714" x="13" y="2389.4902"/><rect fill="#FFFFFF" height="73.5762" style="stroke: none; stroke-width: 1.0;" width="714" x="13" y="2436.1113"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41" x2="41" y1="86.4883" y2="2545.998"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="41" x2="41" y1="2545.998" y2="2586.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41" x2="41" y1="2586.9531" y2="2639.2637"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="493.5" y1="86.4883" y2="2545.998"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="493.5" x2="493.5" y1="2545.998" y2="2586.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="493.5" y1="2586.9531" y2="2639.2637"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="692" x2="692" y1="86.4883" y2="2545.998"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="692" x2="692" y1="2545.998" y2="2586.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="692" x2="692" y1="2586.9531" y2="2639.2637"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="780" x2="780" y1="86.4883" y2="2545.998"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="780" x2="780" y1="2545.998" y2="2586.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="780" x2="780" y1="2586.9531" y2="2639.2637"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1060.5" x2="1060.5" y1="86.4883" y2="2545.998"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1060.5" x2="1060.5" y1="2545.998" y2="2586.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1060.5" x2="1060.5" y1="2586.9531" y2="2639.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="23" y="83.5352">User</text><ellipse cx="41.5" cy="13" fill="#FEFECE" filter="url(#f5g0vw7y76im2)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M41.5,21 L41.5,48 M28.5,29 L54.5,29 M41.5,48 L28.5,63 M41.5,48 L54.5,63 " fill="none" filter="url(#f5g0vw7y76im2)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="23" y="2651.7988">User</text><ellipse cx="41.5" cy="2664.752" fill="#FEFECE" filter="url(#f5g0vw7y76im2)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M41.5,2672.752 L41.5,2699.752 M28.5,2680.752 L54.5,2680.752 M41.5,2699.752 L28.5,2714.752 M41.5,2699.752 L54.5,2714.752 " fill="none" filter="url(#f5g0vw7y76im2)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f5g0vw7y76im2)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="460.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="467.5" y="71.5352">Privaas</text><rect fill="#FEFECE" filter="url(#f5g0vw7y76im2)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="460.5" y="2638.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="467.5" y="2658.7988">Privaas</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="673.5" y="83.5352">Okta</text><path d="M672,42 L672,66 M672,54 L689,54 " fill="none" filter="url(#f5g0vw7y76im2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="701" cy="54" fill="#FEFECE" filter="url(#f5g0vw7y76im2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="673.5" y="2651.7988">Okta</text><path d="M672,2658.752 L672,2682.752 M672,2670.752 L689,2670.752 " fill="none" filter="url(#f5g0vw7y76im2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="701" cy="2670.752" fill="#FEFECE" filter="url(#f5g0vw7y76im2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="727" y="83.5352">AdminConsole</text><path d="M760,42 L760,66 M760,54 L777,54 " fill="none" filter="url(#f5g0vw7y76im2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="789" cy="54" fill="#FEFECE" filter="url(#f5g0vw7y76im2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="727" y="2651.7988">AdminConsole</text><path d="M760,2658.752 L760,2682.752 M760,2670.752 L777,2670.752 " fill="none" filter="url(#f5g0vw7y76im2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="789" cy="2670.752" fill="#FEFECE" filter="url(#f5g0vw7y76im2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="1032.5" y="83.5352">Recurly</text><path d="M1040,42 L1040,66 M1040,54 L1057,54 " fill="none" filter="url(#f5g0vw7y76im2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1069" cy="54" fill="#FEFECE" filter="url(#f5g0vw7y76im2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="1032.5" y="2651.7988">Recurly</text><path d="M1040,2658.752 L1040,2682.752 M1040,2670.752 L1057,2670.752 " fill="none" filter="url(#f5g0vw7y76im2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1069" cy="2670.752" fill="#FEFECE" filter="url(#f5g0vw7y76im2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="481.5,113.7988,491.5,117.7988,481.5,121.7988,485.5,117.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="487.5" y1="117.7988" y2="117.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="48.5" y="113.0566">&lt;&lt;DataErasureRequest&gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="535.5" y1="147.1094" y2="147.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="535.5" x2="535.5" y1="147.1094" y2="160.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="535.5" y1="160.1094" y2="160.1094"/><polygon fill="#A80036" points="504.5,156.1094,494.5,160.1094,504.5,164.1094,500.5,160.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="500.5" y="142.3672">Hash(email)</text><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1105.5" x="3" y="188.7646"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="188.7646" y2="188.7646"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="191.7646" y2="191.7646"/><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="110" x="500.75" y="178.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="506.75" y="194.6777">Preconditions</text><polygon fill="#A80036" points="768.5,228.7305,778.5,232.7305,768.5,236.7305,772.5,232.7305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="774.5" y1="232.7305" y2="232.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="500.5" y="227.9883">FindAccount(Email)</text><path d="M13,247.7305 L75,247.7305 L75,254.7305 L65,264.7305 L13,264.7305 L13,247.7305 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="831" x="13" y="247.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="261.2988">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="90" y="260.3652">[Account exists case]</text><polygon fill="#A80036" points="504.5,282.3516,494.5,286.3516,504.5,290.3516,500.5,286.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="779.5" y1="286.3516" y2="286.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="510.5" y="281.6094">AccountID</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="844" y1="295.3516" y2="295.3516"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="18" y="305.9863">[Not exists]</text><polygon fill="#A80036" points="504.5,326.6172,494.5,330.6172,504.5,334.6172,500.5,330.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="779.5" y1="330.6172" y2="330.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="510.5" y="325.875">Account not exists</text><polygon fill="#A80036" points="52.5,355.9277,42.5,359.9277,52.5,363.9277,48.5,359.9277" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46.5" x2="492.5" y1="359.9277" y2="359.9277"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="58.5" y="355.1855">AdminConsole account not found</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="350.9277" y2="368.9277"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="368.9277" y2="350.9277"/><polygon fill="#A80036" points="680.5,392.2383,690.5,396.2383,680.5,400.2383,684.5,396.2383" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="686.5" y1="396.2383" y2="396.2383"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="500.5" y="391.4961">FindAccount(Email)</text><path d="M13,411.2383 L75,411.2383 L75,418.2383 L65,428.2383 L13,428.2383 L13,411.2383 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="714" x="13" y="411.2383"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="424.8066">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="90" y="423.873">[Account exists case]</text><polygon fill="#A80036" points="504.5,445.8594,494.5,449.8594,504.5,453.8594,500.5,449.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="691.5" y1="449.8594" y2="449.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="510.5" y="445.1172">AccountID</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="727" y1="458.8594" y2="458.8594"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="18" y="469.4941">[Not exists]</text><polygon fill="#A80036" points="504.5,490.125,494.5,494.125,504.5,498.125,500.5,494.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="691.5" y1="494.125" y2="494.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="510.5" y="489.3828">Account not exists</text><polygon fill="#A80036" points="52.5,519.4355,42.5,523.4355,52.5,527.4355,48.5,523.4355" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46.5" x2="492.5" y1="523.4355" y2="523.4355"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="58.5" y="518.6934">Okta account not found</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="514.4355" y2="532.4355"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="532.4355" y2="514.4355"/><polygon fill="#A80036" points="1048.5,555.7461,1058.5,559.7461,1048.5,563.7461,1052.5,559.7461" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="1054.5" y1="559.7461" y2="559.7461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="500.5" y="555.0039">GetAccount(AccountID)</text><path d="M13,574.7461 L75,574.7461 L75,581.7461 L65,591.7461 L13,591.7461 L13,574.7461 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="1085.5" x="13" y="574.7461"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="588.3145">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="90" y="587.3809">[Account exists case]</text><polygon fill="#A80036" points="504.5,609.3672,494.5,613.3672,504.5,617.3672,500.5,613.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="1059.5" y1="613.3672" y2="613.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="510.5" y="608.625">AccountID</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1098.5" y1="622.3672" y2="622.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="18" y="633.002">[Not exists]</text><polygon fill="#A80036" points="504.5,653.6328,494.5,657.6328,504.5,661.6328,500.5,657.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="1059.5" y1="657.6328" y2="657.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="510.5" y="652.8906">Account not exists</text><polygon fill="#A80036" points="52.5,682.9434,42.5,686.9434,52.5,690.9434,48.5,686.9434" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46.5" x2="492.5" y1="686.9434" y2="686.9434"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="58.5" y="682.2012">Recurly account not found</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="677.9434" y2="695.9434"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="695.9434" y2="677.9434"/><polygon fill="#A80036" points="1048.5,719.2539,1058.5,723.2539,1048.5,727.2539,1052.5,723.2539" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="1054.5" y1="723.2539" y2="723.2539"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="500.5" y="718.5117">HasOutstandingBills(AccountID)</text><path d="M13,738.2539 L75,738.2539 L75,745.2539 L65,755.2539 L13,755.2539 L13,738.2539 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="1085.5" x="13" y="738.2539"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="751.8223">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="90" y="750.8887">[No outstanding bills]</text><polygon fill="#A80036" points="504.5,772.875,494.5,776.875,504.5,780.875,500.5,776.875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="1059.5" y1="776.875" y2="776.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="510.5" y="772.1328">false</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1098.5" y1="785.875" y2="785.875"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="18" y="796.5098">[Outstanding bills found]</text><polygon fill="#A80036" points="504.5,817.1406,494.5,821.1406,504.5,825.1406,500.5,821.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="1059.5" y1="821.1406" y2="821.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="510.5" y="816.3984">true</text><polygon fill="#A80036" points="52.5,846.4512,42.5,850.4512,52.5,854.4512,48.5,850.4512" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46.5" x2="492.5" y1="850.4512" y2="850.4512"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="58.5" y="845.709">Process aborted due to outstanding bills</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="841.4512" y2="859.4512"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="859.4512" y2="841.4512"/><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1105.5" x="3" y="886.1064"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="886.1064" y2="886.1064"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="889.1064" y2="889.1064"/><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="50" x="530.75" y="875.4512"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="536.75" y="892.0195">Okta</text><polygon fill="#A80036" points="680.5,926.0723,690.5,930.0723,680.5,934.0723,684.5,930.0723" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="686.5" y1="930.0723" y2="930.0723"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="500.5" y="925.3301">SuspendCustomer(Email)</text><path d="M13,945.0723 L75,945.0723 L75,952.0723 L65,962.0723 L13,962.0723 L13,945.0723 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="714" x="13" y="945.0723"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="958.6406">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="90" y="957.707">[Okta Account suspended]</text><polygon fill="#A80036" points="504.5,979.6934,494.5,983.6934,504.5,987.6934,500.5,983.6934" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="691.5" y1="983.6934" y2="983.6934"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="510.5" y="978.9512">Account suspended</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="727" y1="992.6934" y2="992.6934"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175" x="18" y="1003.3281">[Error during account removal]</text><polygon fill="#A80036" points="504.5,1023.959,494.5,1027.959,504.5,1031.959,500.5,1027.959" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="691.5" y1="1027.959" y2="1027.959"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="510.5" y="1023.2168">Account suspension error</text><polygon fill="#A80036" points="52.5,1053.2695,42.5,1057.2695,52.5,1061.2695,48.5,1057.2695" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46.5" x2="492.5" y1="1057.2695" y2="1057.2695"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="58.5" y="1052.5273">Okta account suspension error</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="1048.2695" y2="1066.2695"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="1066.2695" y2="1048.2695"/><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1105.5" x="3" y="1092.9248"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="1092.9248" y2="1092.9248"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="1095.9248" y2="1095.9248"/><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="116" x="497.75" y="1082.2695"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="503.75" y="1098.8379">AdminConsole</text><polygon fill="#A80036" points="768.5,1132.8906,778.5,1136.8906,768.5,1140.8906,772.5,1136.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="774.5" y1="1136.8906" y2="1136.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="500.5" y="1132.1484">ScrubAccount(AccountID)</text><path d="M13,1151.8906 L75,1151.8906 L75,1158.8906 L65,1168.8906 L13,1168.8906 L13,1151.8906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="193.7734" style="stroke: #000000; stroke-width: 2.0;" width="831" x="13" y="1151.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="1165.459">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="90" y="1164.5254">[Account Scrubbed]</text><polygon fill="#A80036" points="504.5,1186.5117,494.5,1190.5117,504.5,1194.5117,500.5,1190.5117" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="779.5" y1="1190.5117" y2="1190.5117"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="510.5" y="1185.7695">Account scrubbed</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="844" y1="1199.5117" y2="1199.5117"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="18" y="1210.1465">[Outstanding bills]</text><polygon fill="#A80036" points="504.5,1230.7773,494.5,1234.7773,504.5,1238.7773,500.5,1234.7773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="779.5" y1="1234.7773" y2="1234.7773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="510.5" y="1230.0352">Outstanding bills</text><polygon fill="#A80036" points="52.5,1260.0879,42.5,1264.0879,52.5,1268.0879,48.5,1264.0879" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46.5" x2="492.5" y1="1264.0879" y2="1264.0879"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="314" x="58.5" y="1259.3457">Process aborted partial deletion: outstanding bills</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="1255.0879" y2="1273.0879"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="1273.0879" y2="1255.0879"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="844" y1="1273.0879" y2="1273.0879"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="18" y="1283.7227">[Constraint error]</text><polygon fill="#A80036" points="504.5,1304.3535,494.5,1308.3535,504.5,1312.3535,500.5,1308.3535" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="779.5" y1="1308.3535" y2="1308.3535"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="510.5" y="1303.6113">Unique constraint Error</text><polygon fill="#A80036" points="52.5,1333.6641,42.5,1337.6641,52.5,1341.6641,48.5,1337.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46.5" x2="492.5" y1="1337.6641" y2="1337.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="378" x="58.5" y="1332.9219">Process aborted partial deletion: email and hash in database</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="1328.6641" y2="1346.6641"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="1346.6641" y2="1328.6641"/><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1105.5" x="3" y="1373.3193"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="1373.3193" y2="1373.3193"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="1376.3193" y2="1376.3193"/><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="69" x="521.25" y="1362.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="527.25" y="1379.2324">Recurly</text><path d="M440.5,1402.9746 L502.5,1402.9746 L502.5,1409.9746 L492.5,1419.9746 L440.5,1419.9746 L440.5,1402.9746 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="249.1289" style="stroke: #000000; stroke-width: 2.0;" width="658" x="440.5" y="1402.9746"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="455.5" y="1416.543">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="211" x="517.5" y="1415.6094">[While Recurly Account not scrubbed]</text><polygon fill="#A80036" points="1048.5,1437.5957,1058.5,1441.5957,1048.5,1445.5957,1052.5,1441.5957" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="1054.5" y1="1441.5957" y2="1441.5957"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="500.5" y="1436.8535">GetAccount(AccountID)</text><polygon fill="#A80036" points="504.5,1466.9063,494.5,1470.9063,504.5,1474.9063,500.5,1470.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="1059.5" y1="1470.9063" y2="1470.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="510.5" y="1466.1641">Account details</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="535.5" y1="1500.2168" y2="1500.2168"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="535.5" x2="535.5" y1="1500.2168" y2="1513.2168"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="535.5" y1="1513.2168" y2="1513.2168"/><polygon fill="#A80036" points="504.5,1509.2168,494.5,1513.2168,504.5,1517.2168,500.5,1513.2168" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="500.5" y="1495.4746">IsScrubbed()</text><path d="M450.5,1528.2168 L512.5,1528.2168 L512.5,1535.2168 L502.5,1545.2168 L450.5,1545.2168 L450.5,1528.2168 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="116.8867" style="stroke: #000000; stroke-width: 2.0;" width="176" x="450.5" y="1528.2168"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="465.5" y="1541.7852">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="527.5" y="1540.8516">[scrubbed]</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="493.5" x2="535.5" y1="1566.8379" y2="1566.8379"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="535.5" x2="535.5" y1="1566.8379" y2="1579.8379"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="494.5" x2="535.5" y1="1579.8379" y2="1579.8379"/><polygon fill="#A80036" points="504.5,1575.8379,494.5,1579.8379,504.5,1583.8379,500.5,1579.8379" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="500.5" y="1562.0957">Account scrubbed</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="450.5" x2="626.5" y1="1588.8379" y2="1588.8379"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="455.5" y="1599.4727">[Not scrubbed yet]</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="493.5" x2="535.5" y1="1624.1035" y2="1624.1035"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="535.5" x2="535.5" y1="1624.1035" y2="1637.1035"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="494.5" x2="535.5" y1="1637.1035" y2="1637.1035"/><polygon fill="#A80036" points="504.5,1633.1035,494.5,1637.1035,504.5,1641.1035,500.5,1637.1035" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="500.5" y="1619.3613">Wait(BackoffJitter)</text><polygon fill="#A80036" points="1048.5,1676.4141,1058.5,1680.4141,1048.5,1684.4141,1052.5,1680.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="1054.5" y1="1680.4141" y2="1680.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="500.5" y="1675.6719">ClearBillingInformation(AccountID)</text><path d="M13,1695.4141 L75,1695.4141 L75,1702.4141 L65,1712.4141 L13,1712.4141 L13,1695.4141 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="1085.5" x="13" y="1695.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="1708.9824">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169" x="90" y="1708.0488">[Billing information removed]</text><polygon fill="#A80036" points="504.5,1730.0352,494.5,1734.0352,504.5,1738.0352,500.5,1734.0352" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="1059.5" y1="1734.0352" y2="1734.0352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="510.5" y="1729.293">Billing information removed</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1098.5" y1="1743.0352" y2="1743.0352"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37" x="18" y="1753.6699">[Error]</text><polygon fill="#A80036" points="504.5,1774.3008,494.5,1778.3008,504.5,1782.3008,500.5,1778.3008" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="1059.5" y1="1778.3008" y2="1778.3008"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="510.5" y="1773.5586">Error</text><polygon fill="#A80036" points="52.5,1803.6113,42.5,1807.6113,52.5,1811.6113,48.5,1807.6113" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46.5" x2="492.5" y1="1807.6113" y2="1807.6113"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="373" x="58.5" y="1802.8691">Process aborted partial deletion: unable to clear billing info</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="1798.6113" y2="1816.6113"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="1816.6113" y2="1798.6113"/><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1105.5" x="3" y="1843.2666"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="1843.2666" y2="1843.2666"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="1846.2666" y2="1846.2666"/><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="313" x="399.25" y="1832.6113"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="405.25" y="1849.1797">Wait for Recurly -&gt; Adminconsole Webhook</text><polygon fill="#A80036" points="791.5,1883.2324,781.5,1887.2324,791.5,1891.2324,787.5,1887.2324" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="785.5" x2="1059.5" y1="1887.2324" y2="1887.2324"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="797.5" y="1882.4902">WebHook: account modification reporter</text><path d="M440.5,1902.2324 L502.5,1902.2324 L502.5,1909.2324 L492.5,1919.2324 L440.5,1919.2324 L440.5,1902.2324 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="193.8184" style="stroke: #000000; stroke-width: 2.0;" width="413.5" x="440.5" y="1902.2324"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="455.5" y="1915.8008">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="211" x="517.5" y="1914.8672">[While AdminConsole Account found]</text><polygon fill="#A80036" points="768.5,1936.8535,778.5,1940.8535,768.5,1944.8535,772.5,1940.8535" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="774.5" y1="1940.8535" y2="1940.8535"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="500.5" y="1936.1113">GetAccount(AccountID)</text><path d="M450.5,1955.8535 L512.5,1955.8535 L512.5,1962.8535 L502.5,1972.8535 L450.5,1972.8535 L450.5,1955.8535 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.1973" style="stroke: #000000; stroke-width: 2.0;" width="393.5" x="450.5" y="1955.8535"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="465.5" y="1969.4219">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="527.5" y="1968.4883">[Not found]</text><polygon fill="#A80036" points="504.5,1990.4746,494.5,1994.4746,504.5,1998.4746,500.5,1994.4746" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="779.5" y1="1994.4746" y2="1994.4746"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="510.5" y="1989.7324">No account found</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="450.5" x2="844" y1="2003.4746" y2="2003.4746"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="223" x="455.5" y="2014.1094">[Exists (WebHook call not yet received)]</text><polygon fill="#A80036" points="504.5,2034.7402,494.5,2038.7402,504.5,2042.7402,500.5,2038.7402" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="779.5" y1="2038.7402" y2="2038.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="510.5" y="2033.998">Account details</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="493.5" x2="535.5" y1="2068.0508" y2="2068.0508"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="535.5" x2="535.5" y1="2068.0508" y2="2081.0508"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="494.5" x2="535.5" y1="2081.0508" y2="2081.0508"/><polygon fill="#A80036" points="504.5,2077.0508,494.5,2081.0508,504.5,2085.0508,500.5,2081.0508" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="500.5" y="2063.3086">Wait(BackoffJitter)</text><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1105.5" x="3" y="2123.7061"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="2123.7061" y2="2123.7061"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="2126.7061" y2="2126.7061"/><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="116" x="497.75" y="2113.0508"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="503.75" y="2129.6191">AdminConsole</text><polygon fill="#A80036" points="768.5,2163.6719,778.5,2167.6719,768.5,2171.6719,772.5,2167.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="774.5" y1="2167.6719" y2="2167.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="500.5" y="2162.9297">MarkForDeletion(Email)</text><path d="M13,2182.6719 L75,2182.6719 L75,2189.6719 L65,2199.6719 L13,2199.6719 L13,2182.6719 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="831" x="13" y="2182.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="2196.2402">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169" x="90" y="2195.3066">[Account marked for deletion]</text><polygon fill="#A80036" points="504.5,2217.293,494.5,2221.293,504.5,2225.293,500.5,2221.293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="779.5" y1="2221.293" y2="2221.293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="510.5" y="2216.5508">Ok</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="844" y1="2230.293" y2="2230.293"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="18" y="2240.9277">[Replication error (WebHook)]</text><polygon fill="#A80036" points="504.5,2261.5586,494.5,2265.5586,504.5,2269.5586,500.5,2265.5586" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="779.5" y1="2265.5586" y2="2265.5586"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="510.5" y="2260.8164">Error</text><polygon fill="#A80036" points="52.5,2290.8691,42.5,2294.8691,52.5,2298.8691,48.5,2294.8691" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46.5" x2="492.5" y1="2294.8691" y2="2294.8691"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="428" x="58.5" y="2290.127">Process aborted partial deletion: unable to mark account to deletion</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="2285.8691" y2="2303.8691"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="2303.8691" y2="2285.8691"/><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1105.5" x="3" y="2330.5244"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="2330.5244" y2="2330.5244"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1108.5" y1="2333.5244" y2="2333.5244"/><rect fill="#EEEEEE" filter="url(#f5g0vw7y76im2)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="50" x="530.75" y="2319.8691"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="536.75" y="2336.4375">Okta</text><polygon fill="#A80036" points="680.5,2370.4902,690.5,2374.4902,680.5,2378.4902,684.5,2374.4902" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493.5" x2="686.5" y1="2374.4902" y2="2374.4902"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="500.5" y="2369.748">RemoveAccount(AccountID)</text><path d="M13,2389.4902 L75,2389.4902 L75,2396.4902 L65,2406.4902 L13,2406.4902 L13,2389.4902 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="120.1973" style="stroke: #000000; stroke-width: 2.0;" width="714" x="13" y="2389.4902"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="2403.0586">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="90" y="2402.125">[Okta Account removed]</text><polygon fill="#A80036" points="504.5,2424.1113,494.5,2428.1113,504.5,2432.1113,500.5,2428.1113" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="691.5" y1="2428.1113" y2="2428.1113"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="510.5" y="2423.3691">Account removed</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="727" y1="2437.1113" y2="2437.1113"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175" x="18" y="2447.7461">[Error during account removal]</text><polygon fill="#A80036" points="504.5,2468.377,494.5,2472.377,504.5,2476.377,500.5,2472.377" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="691.5" y1="2472.377" y2="2472.377"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="510.5" y="2467.6348">Account removal error</text><polygon fill="#A80036" points="52.5,2497.6875,42.5,2501.6875,52.5,2505.6875,48.5,2501.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46.5" x2="492.5" y1="2501.6875" y2="2501.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="58.5" y="2496.9453">Okta account removal error</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="2492.6875" y2="2510.6875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="2510.6875" y2="2492.6875"/><polygon fill="#A80036" points="52.5,2533.998,42.5,2537.998,52.5,2541.998,48.5,2537.998" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46.5" x2="492.5" y1="2537.998" y2="2537.998"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="58.5" y="2533.2559">Completion notification</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="2528.998" y2="2546.998"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="32.5" x2="50.5" y1="2546.998" y2="2528.998"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="510" y="2570.6328">Later in a batch</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="780.5" x2="822.5" y1="2608.2637" y2="2608.2637"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="822.5" x2="822.5" y1="2608.2637" y2="2621.2637"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="781.5" x2="822.5" y1="2621.2637" y2="2621.2637"/><polygon fill="#A80036" points="791.5,2617.2637,781.5,2621.2637,791.5,2625.2637,787.5,2621.2637" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="787.5" y="2603.5215">Delete records marked for deletion</text><!--
@startuml DataErasureRequest

actor User
participant Privaas
boundary Okta
boundary AdminConsole
boundary Recurly

User -> Privaas : <<DataErasureRequest>>

Privaas -> Privaas: Hash(email)

== Preconditions ==

Privaas -> AdminConsole : FindAccount(Email)
alt Account exists case
    AdminConsole - -> Privaas : AccountID
else Not exists
    AdminConsole - -> Privaas : Account not exists
    Privaas - -> User !!: AdminConsole account not found
end

Privaas -> Okta : FindAccount(Email)
alt Account exists case
    Okta - -> Privaas : AccountID
else Not exists
    Okta - -> Privaas : Account not exists
    Privaas - -> User !!: Okta account not found
end

Privaas -> Recurly : GetAccount(AccountID)
alt Account exists case
    Recurly - -> Privaas : AccountID
else Not exists
    Recurly - -> Privaas : Account not exists
    Privaas - -> User !!: Recurly account not found
end

Privaas -> Recurly: HasOutstandingBills(AccountID)
alt No outstanding bills
    Recurly - -> Privaas: false
else Outstanding bills found
    Recurly - -> Privaas : true
    Privaas - -> User !!: Process aborted due to outstanding bills
end

== Okta ==

Privaas -> Okta : SuspendCustomer(Email)
alt Okta Account suspended
    Okta - -> Privaas : Account suspended
else Error during account removal
    Okta - -> Privaas : Account suspension error
    Privaas - -> User !!: Okta account suspension error
end

== AdminConsole ==

Privaas -> AdminConsole : ScrubAccount(AccountID)
alt Account Scrubbed
    AdminConsole - -> Privaas: Account scrubbed
else Outstanding bills
    AdminConsole - -> Privaas: Outstanding bills
    Privaas - -> User !!: Process aborted partial deletion: outstanding bills
else Constraint error
    AdminConsole - -> Privaas: Unique constraint Error
    Privaas - -> User !!: Process aborted partial deletion: email and hash in database
end

== Recurly ==

alt While Recurly Account not scrubbed
    Privaas -> Recurly : GetAccount(AccountID)
    Recurly - -> Privaas : Account details

    Privaas -> Privaas: IsScrubbed()
    alt scrubbed
        Privaas - -> Privaas: Account scrubbed
    else Not scrubbed yet
        Privaas - -> Privaas: Wait(BackoffJitter)
    end
end

Privaas -> Recurly : ClearBillingInformation(AccountID)
alt Billing information removed
    Recurly - -> Privaas : Billing information removed
else Error
    Recurly - -> Privaas : Error
    Privaas - -> User !!: Process aborted partial deletion: unable to clear billing info
end

== Wait for Recurly -> Adminconsole Webhook ==

Recurly -> AdminConsole: WebHook: account modification reporter

alt While AdminConsole Account found
    Privaas -> AdminConsole : GetAccount(AccountID)
    alt Not found
        AdminConsole - -> Privaas: No account found
    else Exists (WebHook call not yet received)
        AdminConsole - -> Privaas : Account details
        Privaas - -> Privaas: Wait(BackoffJitter)
    end
end

== AdminConsole ==

Privaas -> AdminConsole : MarkForDeletion(Email)
alt Account marked for deletion
    AdminConsole - -> Privaas : Ok
else Replication error (WebHook)
    AdminConsole - -> Privaas : Error
    Privaas - -> User !!: Process aborted partial deletion: unable to mark account to deletion
end

== Okta ==

Privaas -> Okta : RemoveAccount(AccountID)
alt Okta Account removed
    Okta - -> Privaas : Account removed
else Error during account removal
    Okta - -> Privaas : Account removal error
    Privaas - -> User !!: Okta account removal error
end

Privaas - -> User !! : Completion notification

...Later in a batch...

AdminConsole -> AdminConsole: Delete records marked for deletion

@enduml

PlantUML version 1.2019.09(Mon Aug 26 18:19:51 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 13.0.2+8
Operating System: Mac OS X
OS Version: 10.14.6
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>