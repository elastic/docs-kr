<!DOCTYPE html><html lang="en"><head><meta name="eui-styles"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-24"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'UA-12395217-24', {
                page_path: window.location.pathname,
              });
          </script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script>!function(){try{var d=document.documentElement;var e=localStorage.getItem("elastic-docs-theme");if(e){d.setAttribute('data-theme', e)}else{d.setAttribute('data-theme', 'light');}}catch(t){}}();</script><title>Local Development | Elastic Documentation</title><meta property="og:title" content="Local Development | Elastic Documentation"/><meta class="elastic" name="title" content="Local Development"/><meta class="elastic" name="date" content="2022-03-24T00:00:00.000Z"/><meta name="description" content="Need help? Here you&#x27;ll find complete coverage of Elasticsearch, Kibana and more."/><meta property="og:description" content="Need help? Here you&#x27;ll find complete coverage of Elasticsearch, Kibana and more."/><meta name="twitter:site" content="@elastic"/><meta property="og:url" content="http://localhost:3000/ci/gobld/local-development"/><link rel="stylesheet" type="text/css" href="/themes/eui_theme_undefined.min.css"/><link rel="stylesheet" type="text/css" href="/themes/theme_undefined.css"/><link rel="shortcut icon" href="/assets/images/favicon.ico"/><meta name="next-head-count" content="14"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-5b19eee634f155d9037d.js" defer=""></script><script src="/_next/static/chunks/framework-bf9b12c23e794b196495.js" defer=""></script><script src="/_next/static/chunks/main-710a14204f294c81ed08.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d9a28ac2b5165b299106.js" defer=""></script><script src="/_next/static/chunks/c78d26b1-ff6470003369f2a26fc7.js" defer=""></script><script src="/_next/static/chunks/103-fd3e1552f32e8c4a6b92.js" defer=""></script><script src="/_next/static/chunks/3674-41861bc71d856d154d9e.js" defer=""></script><script src="/_next/static/chunks/7815-952dc762df3d4a43befe.js" defer=""></script><script src="/_next/static/chunks/9237-e960f47bcd4625ef5949.js" defer=""></script><script src="/_next/static/chunks/4620-e195c3f5ae7ecefc57c7.js" defer=""></script><script src="/_next/static/chunks/8482-a7f4dd7850e2aa9b7794.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...slug%5D-ac753ff46f79468d535c.js" defer=""></script><script src="/_next/static/AzE3g5BBfFWf9aUdpqGZ7/_buildManifest.js" defer=""></script><script src="/_next/static/AzE3g5BBfFWf9aUdpqGZ7/_ssgManifest.js" defer=""></script></head><body class="guideBody"><div id="__next"><div class="docWrapper"><header data-elastic-exclude="true"><div class="euiHeader euiHeader--dark euiHeader--fixed"><div class="euiHeaderSection euiHeaderSection--dontGrow euiHeaderSection--left"><div class="euiHeaderSectionItem"><a rel="noreferrer" class="euiHeaderLogo"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--large euiIcon-isLoading euiHeaderLogo__icon" focusable="false" role="img" aria-label="Elastic" aria-hidden="true"></svg><span class="euiHeaderLogo__text"><svg class="elasticMark" width="64" height="19" fill="white" xmlns="http://www.w3.org/2000/svg" aria-labelledby="elasticMark"><title id="elasticMark">Elastic</title><path d="M9.74 16.882l.711-.076.046 1.455c-1.879.257-3.485.393-4.818.393-1.773 0-3.03-.515-3.773-1.545C1.164 16.08.8 14.473.8 12.306c0-4.333 1.727-6.5 5.167-6.5 1.666 0 2.909.47 3.727 1.394.818.924 1.227 2.394 1.227 4.379l-.106 1.409H2.664c0 1.364.242 2.379.742 3.03.5.652 1.349.985 2.576.985 1.242.03 2.485-.015 3.757-.121zm-.667-5.349c0-1.515-.243-2.59-.728-3.212-.484-.621-1.272-.94-2.363-.94s-1.924.334-2.47.986c-.545.651-.833 1.712-.848 3.166h6.409zM13.497 18.427V.7h1.848v17.727h-1.848zM27.027 9.806v6.076c0 .621 1.53.742 1.53.742l-.09 1.637c-1.303 0-2.38.106-3.03-.515a10.861 10.861 0 01-4.44.924c-1.136 0-2-.319-2.59-.97-.592-.636-.895-1.56-.895-2.773 0-1.197.303-2.09.91-2.651.605-.56 1.56-.925 2.863-1.046l3.879-.363v-1.06c0-.834-.182-1.44-.546-1.804-.363-.364-.863-.545-1.485-.545H18.27V5.82h4.742c1.394 0 2.41.318 3.046.97.651.636.97 1.651.97 3.015zm-7.606 5.03c0 1.516.621 2.273 1.879 2.273a9.89 9.89 0 003.303-.56l.56-.197v-4.076l-3.65.348c-.743.06-1.274.273-1.607.637-.333.363-.485.894-.485 1.575zM34.255 7.473c-1.788 0-2.697.62-2.697 1.879 0 .575.212.984.62 1.227.41.242 1.35.485 2.819.742 1.47.258 2.5.606 3.106 1.076.606.454.91 1.318.91 2.59 0 1.274-.41 2.198-1.228 2.789-.818.59-2 .894-3.576.894-1.015 0-4.424-.38-4.424-.38l.106-1.605c1.954.182 3.379.333 4.333.333.955 0 1.682-.151 2.182-.454.5-.303.758-.819.758-1.53 0-.713-.212-1.198-.637-1.455-.424-.258-1.363-.5-2.818-.728-1.455-.227-2.485-.56-3.09-1.015-.607-.439-.91-1.272-.91-2.47 0-1.196.424-2.09 1.273-2.666.848-.576 1.909-.864 3.166-.864 1 0 4.485.258 4.485.258v1.621c-1.833-.106-3.333-.242-4.379-.242zM47.952 7.685h-3.925v5.909c0 1.409.106 2.348.303 2.788.212.44.697.666 1.47.666l2.197-.151.121 1.53c-1.106.182-1.94.273-2.515.273-1.288 0-2.167-.318-2.667-.94-.5-.62-.742-1.818-.742-3.575v-6.5h-1.758V6.079h1.758V2.29h1.833v3.773h3.925v1.62zM50.527 3.276V1.139h1.849v2.152l-1.849-.015zm0 15.151V6.08h1.849v12.348h-1.849zM60.406 5.821c.546 0 1.47.106 2.773.303l.59.076-.075 1.5c-1.318-.152-2.288-.227-2.91-.227-1.393 0-2.348.333-2.848 1-.5.666-.757 1.909-.757 3.712 0 1.803.227 3.06.697 3.773.47.712 1.44 1.06 2.924 1.06l2.91-.227.075 1.53c-1.53.227-2.682.349-3.44.349-1.924 0-3.257-.5-3.984-1.485-.728-.985-1.106-2.652-1.106-5 0-2.349.393-4 1.181-4.94.803-.939 2.122-1.424 3.97-1.424z"></path></svg></span></a></div></div><div class="euiHeaderSection euiHeaderSection--dontGrow euiHeaderSection--left"><div class="euiHeaderSectionItem"><nav class="euiHeaderLinks" aria-label="App menu"><div class="euiHeaderLinks__list euiHeaderLinks__list--gutterS"><a class="euiButton euiButton--primary euiButton--small euiButton--fill" href="https://cloud.elastic.co/registration?source=docsHeader" rel=""><span class="euiButtonContent euiButton__content"><span class="euiButton__text">Try Free</span></span></a></div></nav></div></div></div></header><div class="euiPage euiPage--grow docArticle__template"><div class="euiPageSideBar euiPageSideBar--paddingLarge euiPageSideBar--sticky docChrome__sidebar"><div class="euiFlexItem" data-elastic-exclude="true"><div class="euiContextMenu docChrome__contextMenu"><div class="euiContextMenuPanel euiContextMenu__panel" tabindex="-1"><button class="euiContextMenuPanelTitle" type="button" data-test-subj="contextMenuPanelTitleButton"><span class="euiContextMenu__itemLayout"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium euiIcon-isLoading euiContextMenu__icon" focusable="false" role="img" aria-hidden="true"></svg><span class="euiContextMenu__text">Elastic 영상 모음</span></span></button><div><style data-emotion="css i2qclb-euiSpacer-s">.css-i2qclb-euiSpacer-s{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;height:8px;}</style><div class="euiSpacer euiSpacer--s css-i2qclb-euiSpacer-s"></div><nav class="euiSideNav" aria-label="Elastic 영상 모음"><div id="euiSideNav_b9557c50-eaaa-11ec-8d41-3942448bfec2_content" class="euiSideNav__content euiSideNav__contentMobile-xs euiSideNav__contentMobile-s"><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">Elastic 영상 모음</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krVideos/overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">페이지 소개</span></span></a></div></div></div><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">데이터 수집 및 시각화 데모</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krVideos/vid-seoulMetro2019" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">(2019) 서울시 지하철 대시보드 만들기</span></span></a></div></div></div><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">(2021) 처음부터 시작하는 Elastic</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krVideos/vid-esScratch2021-0" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">0. 과정 소개 및 시스템 준비</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krVideos/vid-esScratch2021-1" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1. Stack 설치 및 환경 설정</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krVideos/vid-esScratch2021-2" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2. 데이터 활용 및 QueryDSL</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krVideos/vid-esScratch2021-3" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">3. 데이터 파이프라인 구성</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krVideos/vid-esScratch2021-4" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4. Kibana 대시보드 만들기</span></span></a></div></div></div></div></nav></div></div></div></div></div><div class="euiPanel euiPanel--paddingLarge euiPanel--borderRadiusNone euiPanel--plain euiPanel--hasShadow euiPageBody euiPageBody--borderRadiusNone euiPageBody--paddingLarge"><div class="euiFlexGroup euiFlexGroup--gutterExtraLarge euiFlexGroup--directionRow euiFlexGroup--responsive docArticle__wrap"><div class="euiFlexItem docArticle__article"><header class="euiPageHeader euiPageHeader--bottomBorder euiPageHeader--responsive euiPageHeader--center"><div class="euiPageHeaderContent"><div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--alignItemsFlexStart euiFlexGroup--directionRow euiFlexGroup--responsive euiPageHeaderContent__top"><div class="euiFlexItem"><h1 class="euiTitle euiTitle--large">Local Development</h1><style data-emotion="css jz428s-euiSpacer-l">.css-jz428s-euiSpacer-l{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;height:24px;}</style><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div class="euiText euiText--medium euiText--constrainedWidth"><p><span class="euiTextColor euiTextColor--subdued"></span></p></div></div></div></div></header><style data-emotion="css kiiy9t-euiSpacer-xl">.css-kiiy9t-euiSpacer-xl{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;height:32px;}</style><div class="euiSpacer euiSpacer--xl css-kiiy9t-euiSpacer-xl"></div><div class="euiPanel euiPanel--borderRadiusMedium euiPanel--plain euiPanel--noShadow euiPageContent" role="main"><div class="euiPageContentBody"><div class="euiText euiText--medium"><p>Gobld is the utility we have written to provision workers for CI.
When making changes or adding features to Gobld it is often necessary
to see how these features perform in a live environment (responding to
webhooks, issuing commands to Vault and Buildkite, etc).  This
document aims to explain how to run a local Gobld and have it interact
with other external services.</p>
<blockquote>
<p>NOTE: The instructions below assume elevated permissions in both
Vault (to access various secrets) and Buildkite (to access the
<code class="euiCode" data-code-language="text">Settings</code> screen).</p>
</blockquote>
<h2 id="getting-started" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#getting-started" rel="noreferrer" aria-label="Getting Started permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium euiIcon-isLoading" focusable="false" role="img" aria-hidden="true"></svg></a>Getting Started</h2>
<p>There are several components to be aware of when setting this up.</p>
<h3 id="ngrok-setup" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#ngrok-setup" rel="noreferrer" aria-label="Ngrok Setup permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium euiIcon-isLoading" focusable="false" role="img" aria-hidden="true"></svg></a>Ngrok Setup</h3>
<p>In order to receive webhooks on your local gobld you either need to
put your computer on the open internet or something must listen for
the webhooks and forward them to you.  For this we will use <code class="euiCode" data-code-language="text">ngrok</code>.</p>
<p>Head to <a class="euiLink euiLink--primary" href="https://ngrok.com" rel="noreferrer">ngrok.com<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--small euiIcon-isLoading euiLink__externalIcon" focusable="false" role="img" aria-label="External link" aria-hidden="true"></svg></a>, sign up, and install the
utility.</p>
<p>Next, in a new terminal window, run the following:</p>
<p><code class="euiCode" data-code-language="text">ngrok http 8080</code></p>
<p>Take note of the HTTPS forwarding URL that ngrok displays as it&#x27;s used below.</p>
<h3 id="buildkite-webhook-config" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#buildkite-webhook-config" rel="noreferrer" aria-label="Buildkite webhook config permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium euiIcon-isLoading" focusable="false" role="img" aria-hidden="true"></svg></a>Buildkite webhook config</h3>
<p>To prevent the local Gobld from picking up production builds, we need
to first create a new webhook configuration on Buildkite.  Head over
to the <code class="euiCode" data-code-language="text">Settings</code> screen for the organization on which you&#x27;re planning
to test.  Click the <code class="euiCode" data-code-language="text">Notification Services</code> link on the left.  That
should take you to <a class="euiLink euiLink--primary" href="https://buildkite.com/organizations/elastic-flavortown/services" rel="noreferrer">this
page<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--small euiIcon-isLoading euiLink__externalIcon" focusable="false" role="img" aria-label="External link" aria-hidden="true"></svg></a>
for the Elastic Flavortown project, for example.</p>
<p>Once there, click the <code class="euiCode" data-code-language="text">Add</code> button next to &quot;Webhook&quot;.  On the &quot;Add
Webhook Notification&quot; screen, set the following:</p>
<ul>
<li>Description: Something to remind you later</li>
<li>Webhook URL: Input the ngrok URL from above and append <code class="euiCode" data-code-language="text">/webhooks</code>.
E.g. <code class="euiCode" data-code-language="text">https://d7e8-123-12-123-123.ngrok.io/webhooks</code></li>
<li>Events: Check the box next to <code class="euiCode" data-code-language="text">job.scheduled</code></li>
<li>Pipelines: Select <code class="euiCode" data-code-language="text">Only Some Pipelines...</code> and select your test pipeline</li>
<li>Branch filtering: Fill in your branch name to avoid accidentally
picking up stray builds.</li>
</ul>
<p>Take note of the <code class="euiCode" data-code-language="text">Token</code> value as it will be used later.</p>
<p>Click <code class="euiCode" data-code-language="text">Save Notification Settings</code></p>
<h3 id="gobld" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#gobld" rel="noreferrer" aria-label="Gobld permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium euiIcon-isLoading" focusable="false" role="img" aria-hidden="true"></svg></a>Gobld</h3>
<blockquote>
<p>NOTE: You may need to edit settings in <code class="euiCode" data-code-language="text">gobld.yml</code> in your gobld
source if there are settings relevant to your development.</p>
</blockquote>
<p>In the shell where you&#x27;ll be running gobld, <code class="euiCode" data-code-language="text">cd</code> to the directory of
your gobld source and:</p>
<div><div class="language-bash euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="bash"><span class="euiCodeBlock__line"><span class="token function">env</span> <span class="token assign-left variable">BK_WEBHOOK_TOKEN</span><span class="token operator">=</span><span class="token string">&quot;&lt;the token from the webhook step above&gt;&quot;</span> <span class="token punctuation">\</span>
</span><span class="euiCodeBlock__line"><span class="token function">make</span> run
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>There should now be logs printing in your terminal.  If you need
access to debug level logging, also:</p>
<div><div class="language-bash euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="bash"><span class="euiCodeBlock__line"><span class="token function">env</span> <span class="token assign-left variable">DEBUG</span><span class="token operator">=</span>true <span class="token punctuation">\</span>
</span><span class="euiCodeBlock__line"><span class="token assign-left variable">BK_WEBHOOK_TOKEN</span><span class="token operator">=</span><span class="token string">&quot;&lt;the token from the webhook step above&gt;&quot;</span> <span class="token punctuation">\</span>
</span><span class="euiCodeBlock__line"><span class="token function">make</span> run
</span><span class="euiCodeBlock__line"></span></code></pre></div></div></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div class="euiText euiText--small"><div class="euiTextColor euiTextColor--subdued">Last updated: Mar 24th, 2022</div></div></div></div></div></div></div></div><footer class="docChromeFooter" data-elastic-exclude="true"><div class="euiFlexGroup euiFlexGroup--justifyContentSpaceAround euiFlexGroup--directionRow euiFlexGroup--responsive"><div class="euiFlexItem euiFlexItem--flexGrowZero docChromeFooter__container"><div class="euiFlexGroup euiFlexGroup--gutterExtraLarge euiFlexGroup--justifyContentSpaceBetween euiFlexGroup--directionRow euiFlexGroup--responsive"><div class="euiFlexItem"><div class="euiText euiText--small"><div class="euiTextColor euiTextColor--ghost"><p>Elasticsearch is a trademark of Elasticsearch B.V., registered in the U.S. and in other countries.</p><p>Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the Apache Software Foundation in the United States and/or other countries.</p><p> <a class="euiLink euiLink--ghost" href="https://www.elastic.co/legal/trademarks" rel="">Trademarks</a><span class="docChromeFooter__divide">|</span><a class="euiLink euiLink--ghost" href="https://www.elastic.co/legal/terms-of-use" rel="">Terms of Use</a><span class="docChromeFooter__divide">|</span><a class="euiLink euiLink--ghost" href="https://www.elastic.co/legal/privacy-statement" rel="">Privacy</a><span class="docChromeFooter__divide">|</span>© <!-- -->2022<!-- --> Elasticsearch B.V. All Rights Reserved</p></div></div></div><div class="euiFlexItem euiFlexItem--flexGrowZero"></div><div class="euiFlexItem euiFlexItem--flexGrowZero"><figure class="euiImage docChromeFooter__logo"><img style="max-width:xs;max-height:xs;width:auto" src="/assets/images/logo-elastic-vertical-reverse.svg" class="euiImage__img" alt="Elastic logo"/></figure></div></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"bundle":"!function(e,t){\"object\"==typeof exports\u0026\u0026\"object\"==typeof module?module.exports=t(require(\"mdxJsReact\"),require(\"React\")):\"function\"==typeof define\u0026\u0026define.amd?define([\"mdxJsReact\",\"React\"],t):\"object\"==typeof exports?exports.MDXContent=t(require(\"mdxJsReact\"),require(\"React\")):e.MDXContent=t(e.mdxJsReact,e.React)}(this,((e,t)=\u003e(()=\u003e{\"use strict\";var n={24:e=\u003e{e.exports=t},825:t=\u003e{t.exports=e}},o={};function l(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return n[e](r,r.exports,l),r.exports}l.n=e=\u003e{var t=e\u0026\u0026e.__esModule?()=\u003ee.default:()=\u003ee;return l.d(t,{a:t}),t},l.d=(e,t)=\u003e{for(var n in t)l.o(t,n)\u0026\u0026!l.o(e,n)\u0026\u0026Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=\u003eObject.prototype.hasOwnProperty.call(e,t),l.r=e=\u003e{\"undefined\"!=typeof Symbol\u0026\u0026Symbol.toStringTag\u0026\u0026Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var r={};return(()=\u003e{l.r(r),l.d(r,{default:()=\u003eo});var e=l(825),t=l(24),n=l.n(t);const o=function(){var t=arguments.length\u003e0\u0026\u0026void 0!==arguments[0]?arguments[0]:{},o=Object.assign({},(0,e.useMDXComponents)(),t.components),l=o.wrapper;return l?n().createElement(l,t,n().createElement(r)):r();function r(){var o=Object.assign({p:\"p\",blockquote:\"blockquote\",code:\"code\",h2:\"h2\",h3:\"h3\",a:\"a\",ul:\"ul\",li:\"li\",pre:\"pre\"},(0,e.useMDXComponents)(),t.components);return n().createElement(n().Fragment,null,n().createElement(o.p,null,\"Gobld is the utility we have written to provision workers for CI.\\nWhen making changes or adding features to Gobld it is often necessary\\nto see how these features perform in a live environment (responding to\\nwebhooks, issuing commands to Vault and Buildkite, etc).  This\\ndocument aims to explain how to run a local Gobld and have it interact\\nwith other external services.\"),\"\\n\",n().createElement(o.blockquote,null,\"\\n\",n().createElement(o.p,null,\"NOTE: The instructions below assume elevated permissions in both\\nVault (to access various secrets) and Buildkite (to access the\\n\",n().createElement(o.code,{display:\"inline\"},\"Settings\"),\" screen).\"),\"\\n\"),\"\\n\",n().createElement(o.h2,{id:\"getting-started\"},\"Getting Started\"),\"\\n\",n().createElement(o.p,null,\"There are several components to be aware of when setting this up.\"),\"\\n\",n().createElement(o.h3,{id:\"ngrok-setup\"},\"Ngrok Setup\"),\"\\n\",n().createElement(o.p,null,\"In order to receive webhooks on your local gobld you either need to\\nput your computer on the open internet or something must listen for\\nthe webhooks and forward them to you.  For this we will use \",n().createElement(o.code,{display:\"inline\"},\"ngrok\"),\".\"),\"\\n\",n().createElement(o.p,null,\"Head to \",n().createElement(o.a,{href:\"https://ngrok.com\"},\"ngrok.com\"),\", sign up, and install the\\nutility.\"),\"\\n\",n().createElement(o.p,null,\"Next, in a new terminal window, run the following:\"),\"\\n\",n().createElement(o.p,null,n().createElement(o.code,{display:\"inline\"},\"ngrok http 8080\")),\"\\n\",n().createElement(o.p,null,\"Take note of the HTTPS forwarding URL that ngrok displays as it's used below.\"),\"\\n\",n().createElement(o.h3,{id:\"buildkite-webhook-config\"},\"Buildkite webhook config\"),\"\\n\",n().createElement(o.p,null,\"To prevent the local Gobld from picking up production builds, we need\\nto first create a new webhook configuration on Buildkite.  Head over\\nto the \",n().createElement(o.code,{display:\"inline\"},\"Settings\"),\" screen for the organization on which you're planning\\nto test.  Click the \",n().createElement(o.code,{display:\"inline\"},\"Notification Services\"),\" link on the left.  That\\nshould take you to \",n().createElement(o.a,{href:\"https://buildkite.com/organizations/elastic-flavortown/services\"},\"this\\npage\"),\"\\nfor the Elastic Flavortown project, for example.\"),\"\\n\",n().createElement(o.p,null,\"Once there, click the \",n().createElement(o.code,{display:\"inline\"},\"Add\"),' button next to \"Webhook\".  On the \"Add\\nWebhook Notification\" screen, set the following:'),\"\\n\",n().createElement(o.ul,null,\"\\n\",n().createElement(o.li,null,\"Description: Something to remind you later\"),\"\\n\",n().createElement(o.li,null,\"Webhook URL: Input the ngrok URL from above and append \",n().createElement(o.code,{display:\"inline\"},\"/webhooks\"),\".\\nE.g. \",n().createElement(o.code,{display:\"inline\"},\"https://d7e8-123-12-123-123.ngrok.io/webhooks\")),\"\\n\",n().createElement(o.li,null,\"Events: Check the box next to \",n().createElement(o.code,{display:\"inline\"},\"job.scheduled\")),\"\\n\",n().createElement(o.li,null,\"Pipelines: Select \",n().createElement(o.code,{display:\"inline\"},\"Only Some Pipelines...\"),\" and select your test pipeline\"),\"\\n\",n().createElement(o.li,null,\"Branch filtering: Fill in your branch name to avoid accidentally\\npicking up stray builds.\"),\"\\n\"),\"\\n\",n().createElement(o.p,null,\"Take note of the \",n().createElement(o.code,{display:\"inline\"},\"Token\"),\" value as it will be used later.\"),\"\\n\",n().createElement(o.p,null,\"Click \",n().createElement(o.code,{display:\"inline\"},\"Save Notification Settings\")),\"\\n\",n().createElement(o.h3,{id:\"gobld\"},\"Gobld\"),\"\\n\",n().createElement(o.blockquote,null,\"\\n\",n().createElement(o.p,null,\"NOTE: You may need to edit settings in \",n().createElement(o.code,{display:\"inline\"},\"gobld.yml\"),\" in your gobld\\nsource if there are settings relevant to your development.\"),\"\\n\"),\"\\n\",n().createElement(o.p,null,\"In the shell where you'll be running gobld, \",n().createElement(o.code,{display:\"inline\"},\"cd\"),\" to the directory of\\nyour gobld source and:\"),\"\\n\",n().createElement(o.pre,null,n().createElement(o.code,{className:\"language-bash\",display:\"block\"},'env BK_WEBHOOK_TOKEN=\"\u003cthe token from the webhook step above\u003e\" \\\\\\nmake run\\n')),\"\\n\",n().createElement(o.p,null,\"There should now be logs printing in your terminal.  If you need\\naccess to debug level logging, also:\"),\"\\n\",n().createElement(o.pre,null,n().createElement(o.code,{className:\"language-bash\",display:\"block\"},'env DEBUG=true \\\\\\nBK_WEBHOOK_TOKEN=\"\u003cthe token from the webhook step above\u003e\" \\\\\\nmake run\\n')))}}})(),r})()));","frontmatter":{"id":"gobldLocalDevelopment","slug":"/ci/gobld/local-development","title":"Local Development","summary":"How to develop and test Gobld changes on Buildkite","date":"2022-03-24T00:00:00.000Z","tags":["ci","ci/cd","developer tools","buildkite","gobld"],"link":"https://github.com/elastic/ci/blob/main","linkPath":"docs/gobld/local-development.mdx"},"missionId":"krVideos"},"__N_SSG":true},"page":"/[...slug]","query":{"slug":["ci","gobld","local-development"]},"buildId":"AzE3g5BBfFWf9aUdpqGZ7","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>