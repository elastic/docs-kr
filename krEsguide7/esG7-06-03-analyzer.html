<!DOCTYPE html><html lang="en"><head><meta name="eui-styles"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-24"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'UA-12395217-24', {
                page_path: window.location.pathname,
              });
          </script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script>!function(){try{var d=document.documentElement;var e=localStorage.getItem("elastic-docs-theme");if(e){d.setAttribute('data-theme', e)}else{d.setAttribute('data-theme', 'light');}}catch(t){}}();</script><title>6.3 애널라이저 - Analyzer | Elastic Documentation</title><meta property="og:title" content="6.3 애널라이저 - Analyzer | Elastic Documentation"/><meta class="elastic" name="title" content="6.3 애널라이저 - Analyzer"/><meta class="elastic" name="date" content="2022-01-25T00:00:00.000Z"/><meta name="description" content="모든 문서에 대한 저작권은 Elastic 과 김종민(kimjmin@gmail.com) 에게 있으며 허가되지 않은 무단 복제나 배포 및 출판을 금지합니다. 본 문서의 내용 및 포함된 자료를 인용하고자 하는 경우 출처를 명시하고 게재된 주소를 김종민(kimjmin@gmail.com)에게 알려주시기 바랍니다."/><meta property="og:description" content="모든 문서에 대한 저작권은 Elastic 과 김종민(kimjmin@gmail.com) 에게 있으며 허가되지 않은 무단 복제나 배포 및 출판을 금지합니다. 본 문서의 내용 및 포함된 자료를 인용하고자 하는 경우 출처를 명시하고 게재된 주소를 김종민(kimjmin@gmail.com)에게 알려주시기 바랍니다."/><meta name="twitter:site" content="@elastic"/><meta property="og:url" content="http://localhost:3000/krEsguide7/esG7-06-03-analyzer"/><link rel="stylesheet" type="text/css" href="/themes/eui_theme_undefined.min.css"/><link rel="stylesheet" type="text/css" href="/themes/theme_undefined.css"/><link rel="shortcut icon" href="/assets/images/favicon.ico"/><meta name="next-head-count" content="14"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-5b19eee634f155d9037d.js" defer=""></script><script src="/_next/static/chunks/framework-bf9b12c23e794b196495.js" defer=""></script><script src="/_next/static/chunks/main-710a14204f294c81ed08.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d9a28ac2b5165b299106.js" defer=""></script><script src="/_next/static/chunks/c78d26b1-ff6470003369f2a26fc7.js" defer=""></script><script src="/_next/static/chunks/103-fd3e1552f32e8c4a6b92.js" defer=""></script><script src="/_next/static/chunks/3674-41861bc71d856d154d9e.js" defer=""></script><script src="/_next/static/chunks/7815-952dc762df3d4a43befe.js" defer=""></script><script src="/_next/static/chunks/9237-e960f47bcd4625ef5949.js" defer=""></script><script src="/_next/static/chunks/4620-e195c3f5ae7ecefc57c7.js" defer=""></script><script src="/_next/static/chunks/8482-d6a48a2948368737094e.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...slug%5D-ac753ff46f79468d535c.js" defer=""></script><script src="/_next/static/K8YMqTQBQVe0pMujUHgY0/_buildManifest.js" defer=""></script><script src="/_next/static/K8YMqTQBQVe0pMujUHgY0/_ssgManifest.js" defer=""></script></head><body class="guideBody"><div id="__next"><div class="docWrapper"><header data-elastic-exclude="true"><div class="euiHeader euiHeader--dark euiHeader--fixed"><div class="euiHeaderSection euiHeaderSection--dontGrow euiHeaderSection--left"><div class="euiHeaderSectionItem"><a rel="noreferrer" class="euiHeaderLogo"><svg data-type="logoElastic" xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" viewBox="0 0 32 32" class="euiIcon euiIcon--large euiHeaderLogo__icon" focusable="false" role="img" aria-label="Elastic"><path class="outline" fill-rule="evenodd" clip-rule="evenodd" d="M30.86 13.129A6.333 6.333 0 0132 16.77a6.419 6.419 0 01-1.162 3.652 6.382 6.382 0 01-3.032 2.331 4.833 4.833 0 01-1.672 5.542 4.789 4.789 0 01-5.77-.074 9.016 9.016 0 01-4.5 3.322 8.982 8.982 0 01-5.587.023 9.014 9.014 0 01-4.526-3.287 9.067 9.067 0 01-1.727-5.333c0-.579.053-1.156.16-1.725A6.305 6.305 0 011.145 18.9 6.341 6.341 0 010 15.242a6.42 6.42 0 011.163-3.652 6.384 6.384 0 013.035-2.33 4.833 4.833 0 011.658-5.557 4.789 4.789 0 015.78.07 9.037 9.037 0 014.93-3.446 9.007 9.007 0 015.994.419 9.05 9.05 0 014.407 4.098 9.097 9.097 0 01.873 5.965 6.298 6.298 0 013.02 2.32zm-18.28.658l7.002 3.211 7.066-6.213a7.85 7.85 0 00.152-1.557c0-1.692-.539-3.34-1.54-4.704a7.897 7.897 0 00-4.02-2.869 7.87 7.87 0 00-4.932.086 7.9 7.9 0 00-3.92 3.007l-1.174 6.118 1.367 2.92-.001.001zm-7.247 7.441A7.964 7.964 0 006.72 27.53a7.918 7.918 0 004.04 2.874 7.89 7.89 0 004.95-.097 7.92 7.92 0 003.926-3.03l1.166-6.102-1.555-2.985-7.03-3.211-6.885 6.248.001.001zm4.755-11.024l-4.8-1.137.002-.002a3.82 3.82 0 011.312-4.358 3.785 3.785 0 014.538.023l-1.052 5.474zm-5.216.01a5.294 5.294 0 00-2.595 1.882 5.324 5.324 0 00-.142 6.124 5.287 5.287 0 002.505 2l6.733-6.101-1.235-2.65-5.266-1.255zm18.286 17.848a3.737 3.737 0 01-2.285-.785l1.037-5.454 4.8 1.125a3.812 3.812 0 01-1.801 4.68c-.54.283-1.14.432-1.751.434zm-1.31-7.499l5.28 1.238a5.34 5.34 0 002.622-1.938 5.37 5.37 0 001.013-3.106 5.311 5.311 0 00-.936-3.01 5.282 5.282 0 00-2.475-1.944l-6.904 6.07 1.4 2.69z" fill="#fff"></path><path d="M12.58 13.787l7.002 3.211 7.066-6.213a7.849 7.849 0 00.152-1.557c0-1.692-.539-3.34-1.54-4.704a7.897 7.897 0 00-4.02-2.869 7.87 7.87 0 00-4.932.086 7.9 7.9 0 00-3.92 3.007l-1.174 6.118 1.367 2.92-.001.001z" fill="#FEC514"></path><path d="M5.333 21.228A7.964 7.964 0 006.72 27.53a7.918 7.918 0 004.04 2.874 7.89 7.89 0 004.95-.097 7.92 7.92 0 003.926-3.03l1.166-6.102-1.555-2.985-7.03-3.211-6.885 6.248.001.001z" fill="#00BFB3"></path><path d="M5.288 9.067l4.8 1.137L11.14 4.73a3.785 3.785 0 00-5.914 1.94 3.82 3.82 0 00.064 2.395" fill="#F04E98"></path><path d="M4.872 10.214a5.294 5.294 0 00-2.595 1.882 5.324 5.324 0 00-.142 6.124 5.287 5.287 0 002.505 2l6.733-6.101-1.235-2.65-5.266-1.255z" fill="#1BA9F5"></path><path d="M20.873 27.277a3.736 3.736 0 002.285.785 3.783 3.783 0 003.101-1.63 3.812 3.812 0 00.451-3.484l-4.8-1.125-1.037 5.454z" fill="#93C90E"></path><path d="M21.848 20.563l5.28 1.238a5.34 5.34 0 002.622-1.938 5.37 5.37 0 001.013-3.106 5.312 5.312 0 00-.936-3.01 5.283 5.283 0 00-2.475-1.944l-6.904 6.07 1.4 2.69z" fill="#07C"></path></svg><span class="euiHeaderLogo__text"><svg class="elasticMark" width="64" height="19" fill="white" xmlns="http://www.w3.org/2000/svg" aria-labelledby="elasticMark"><title id="elasticMark">Elastic</title><path d="M9.74 16.882l.711-.076.046 1.455c-1.879.257-3.485.393-4.818.393-1.773 0-3.03-.515-3.773-1.545C1.164 16.08.8 14.473.8 12.306c0-4.333 1.727-6.5 5.167-6.5 1.666 0 2.909.47 3.727 1.394.818.924 1.227 2.394 1.227 4.379l-.106 1.409H2.664c0 1.364.242 2.379.742 3.03.5.652 1.349.985 2.576.985 1.242.03 2.485-.015 3.757-.121zm-.667-5.349c0-1.515-.243-2.59-.728-3.212-.484-.621-1.272-.94-2.363-.94s-1.924.334-2.47.986c-.545.651-.833 1.712-.848 3.166h6.409zM13.497 18.427V.7h1.848v17.727h-1.848zM27.027 9.806v6.076c0 .621 1.53.742 1.53.742l-.09 1.637c-1.303 0-2.38.106-3.03-.515a10.861 10.861 0 01-4.44.924c-1.136 0-2-.319-2.59-.97-.592-.636-.895-1.56-.895-2.773 0-1.197.303-2.09.91-2.651.605-.56 1.56-.925 2.863-1.046l3.879-.363v-1.06c0-.834-.182-1.44-.546-1.804-.363-.364-.863-.545-1.485-.545H18.27V5.82h4.742c1.394 0 2.41.318 3.046.97.651.636.97 1.651.97 3.015zm-7.606 5.03c0 1.516.621 2.273 1.879 2.273a9.89 9.89 0 003.303-.56l.56-.197v-4.076l-3.65.348c-.743.06-1.274.273-1.607.637-.333.363-.485.894-.485 1.575zM34.255 7.473c-1.788 0-2.697.62-2.697 1.879 0 .575.212.984.62 1.227.41.242 1.35.485 2.819.742 1.47.258 2.5.606 3.106 1.076.606.454.91 1.318.91 2.59 0 1.274-.41 2.198-1.228 2.789-.818.59-2 .894-3.576.894-1.015 0-4.424-.38-4.424-.38l.106-1.605c1.954.182 3.379.333 4.333.333.955 0 1.682-.151 2.182-.454.5-.303.758-.819.758-1.53 0-.713-.212-1.198-.637-1.455-.424-.258-1.363-.5-2.818-.728-1.455-.227-2.485-.56-3.09-1.015-.607-.439-.91-1.272-.91-2.47 0-1.196.424-2.09 1.273-2.666.848-.576 1.909-.864 3.166-.864 1 0 4.485.258 4.485.258v1.621c-1.833-.106-3.333-.242-4.379-.242zM47.952 7.685h-3.925v5.909c0 1.409.106 2.348.303 2.788.212.44.697.666 1.47.666l2.197-.151.121 1.53c-1.106.182-1.94.273-2.515.273-1.288 0-2.167-.318-2.667-.94-.5-.62-.742-1.818-.742-3.575v-6.5h-1.758V6.079h1.758V2.29h1.833v3.773h3.925v1.62zM50.527 3.276V1.139h1.849v2.152l-1.849-.015zm0 15.151V6.08h1.849v12.348h-1.849zM60.406 5.821c.546 0 1.47.106 2.773.303l.59.076-.075 1.5c-1.318-.152-2.288-.227-2.91-.227-1.393 0-2.348.333-2.848 1-.5.666-.757 1.909-.757 3.712 0 1.803.227 3.06.697 3.773.47.712 1.44 1.06 2.924 1.06l2.91-.227.075 1.53c-1.53.227-2.682.349-3.44.349-1.924 0-3.257-.5-3.984-1.485-.728-.985-1.106-2.652-1.106-5 0-2.349.393-4 1.181-4.94.803-.939 2.122-1.424 3.97-1.424z"></path></svg></span></a></div></div><div class="euiHeaderSection euiHeaderSection--dontGrow euiHeaderSection--left"><div class="euiHeaderSectionItem"><nav class="euiHeaderLinks" aria-label="App menu"><div class="euiHeaderLinks__list euiHeaderLinks__list--gutterS"><a class="euiButton euiButton--primary euiButton--small euiButton--fill" href="https://cloud.elastic.co/registration?source=docsHeader" rel=""><span class="euiButtonContent euiButton__content"><span class="euiButton__text">Try Free</span></span></a></div></nav></div></div></div></header><div class="euiPage euiPage--grow docArticle__template"><div class="euiPageSideBar euiPageSideBar--paddingLarge euiPageSideBar--sticky docChrome__sidebar"><div class="euiFlexItem" data-elastic-exclude="true"><div class="euiContextMenu docChrome__contextMenu"><div class="euiContextMenuPanel euiContextMenu__panel" tabindex="-1"><button class="euiContextMenuPanelTitle" type="button" data-test-subj="contextMenuPanelTitleButton"><span class="euiContextMenu__itemLayout"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiContextMenu__icon" focusable="false" role="img" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.018 14.043a.75.75 0 00.024-1.06l-4.59-4.81a.25.25 0 010-.346l4.59-4.81a.75.75 0 10-1.085-1.035l-4.59 4.81a1.75 1.75 0 000 2.416l4.59 4.81c.286.3.761.31 1.06.024z"></path></svg><span class="euiContextMenu__text">Elastic 가이드북 (7.x)</span></span></button><div><div class="euiSpacer euiSpacer--s css-i2qclb-euiSpacer-s"></div><nav class="euiSideNav" aria-label="Elastic 가이드북 (7.x)"><div id="euiSideNav_36bd6060-e932-11ec-85b2-03fd702ae9f0_content" class="euiSideNav__content euiSideNav__contentMobile-xs euiSideNav__contentMobile-s"><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1. 서문</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-01-overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1. 서문</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-01-01-elastic-stack" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1.1 Elastic Stack 소개</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-01-01-01-elasticsearch" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1.1.1 Elasticsearch</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-01-01-02-logstash" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1.1.2 Logstash</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-01-01-03-kibana" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1.1.3 Kibana</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-01-01-04-beats" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1.1.4 Beats</span></span></a></div></div></div><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2. Elasticsearch 시작하기</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2. Elasticsearch 시작하기</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-01-data-indexing" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.1 데이터 색인</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-02-install-run" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.2 설치 및 실행</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-02-01-download" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.2.1 다운로드 설치 및 실행</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-02-02-unix-rpm" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.2.2 Unix RPM 설치 및 실행</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-03-es-config" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.3 Elasticsearch 환경 설정</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-03-01-jvm" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.3.1 jvm.options</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-03-02-es-yml" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.3.2 elasticsearch.yml</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-03-03-node-config" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.3.3 노드의 역할 : master, data, insgest</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-03-04-cmd" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.3.4 커맨드 라인 설정</span></span></a></div></div></div><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">3. Elasticsearch 시스템 구조</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-03-overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">3. Elasticsearch 시스템 구조</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-03-01-cluster" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">3.1 클러스터 구성</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-03-02-index-shard" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">3.2 인덱스와 샤드 - Index &amp; Shards</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-03-03-master-data-nodes" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">3.3 마스터 노드와 데이터 노드 - Master &amp; Data Nodes</span></span></a></div></div></div><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4. Elasticsearch 데이터 처리</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-04-overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4. Elasticsearch 데이터 처리</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-04-01-rest-api" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4.1 REST API</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-04-02-crud" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4.2 CRUD - 입력,조회,수정,삭제</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-04-03-bulk-api" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4.3 벌크 - _bulk API</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-04-04-search-api" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4.4 검색 - _search API</span></span></a></div></div></div><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5. 검색과 쿼리 - Query DSL</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5. 검색과 쿼리 - Query DSL</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-01-fulltext" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5.1 풀텍스트 쿼리 - Full Text Query</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-02-bool" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5.2 복합 쿼리 - Bool Query</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-03-relevancy" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5.3 정확도 - Relevancy</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-04-bool-should" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5.4 bool : sould</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-05-exact-value" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5.5 정확값 쿼리 - Exact Value Query</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-06-range" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5.6 범위 쿼리 - Range Query</span></span></a></div></div></div><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6. 데이터 색인과 텍스트 분석</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6. 데이터 색인과 텍스트 분석</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-01-inverted-index" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.1 역 인덱스 - Inverted Index</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-02-text-analysis" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.2 텍스트 분석 - Text Analysis</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable euiSideNavItemButton-isSelected" href="/krEsguide7/esG7-06-03-analyzer" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.3 애널라이저 - Analyzer</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-04-char-filter" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.4 캐릭터 필터 - Character Filter</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-05-tokenizer" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.5 토크나이저 - Tokenizer</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-06-token-filter" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.6 토큰 필터 - Token Filter</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-07-stemming" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.7 형태소 분석 - Stemming</span></span></a></div></div></div></div></nav></div></div></div></div></div><div class="euiPanel euiPanel--paddingLarge euiPanel--borderRadiusNone euiPanel--plain euiPanel--hasShadow euiPageBody euiPageBody--borderRadiusNone euiPageBody--paddingLarge"><div class="euiFlexGroup euiFlexGroup--gutterExtraLarge euiFlexGroup--directionRow euiFlexGroup--responsive docArticle__wrap"><div class="euiFlexItem docArticle__article"><header class="euiPageHeader euiPageHeader--bottomBorder euiPageHeader--responsive euiPageHeader--center"><div class="euiPageHeaderContent"><div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--alignItemsFlexStart euiFlexGroup--directionRow euiFlexGroup--responsive euiPageHeaderContent__top"><div class="euiFlexItem"><h1 class="euiTitle euiTitle--large">6.3 애널라이저 - Analyzer</h1><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div class="euiText euiText--medium euiText--constrainedWidth"><p><span class="euiTextColor euiTextColor--subdued">모든 문서에 대한 저작권은 Elastic 과 김종민(kimjmin@gmail.com) 에게 있으며 허가되지 않은 무단 복제나 배포 및 출판을 금지합니다. 본 문서의 내용 및 포함된 자료를 인용하고자 하는 경우 출처를 명시하고 게재된 주소를 김종민(kimjmin@gmail.com)에게 알려주시기 바랍니다.</span></p></div></div></div></div></header><div class="euiSpacer euiSpacer--xl css-kiiy9t-euiSpacer-xl"></div><div class="euiPanel euiPanel--borderRadiusMedium euiPanel--plain euiPanel--noShadow euiPageContent" role="main"><div class="euiPageContentBody"><div class="euiText euiText--medium"><p>Elasticsearch 에는 애널라이저를 조합하고 그 동작을 자세히 확인할 수 있는 API 들이 있습니다. 계속해서 애널라이저와 관련된 기능들에 대해 살펴보겠습니다.</p>
<h2 id="631-_analyze-api" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#631-_analyze-api" rel="noreferrer" aria-label="6.3.1 _analyze API permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium" focusable="false" role="img" aria-hidden="true"><path d="M7.66 3.803a.5.5 0 11-.706-.707L9.268.78c1.187-1.187 3.242-1 4.596.354s1.54 3.409.354 4.596l-3.536 3.536c-1.187 1.187-3.242 1-4.596-.354a.5.5 0 11.707-.707c.99.99 2.417 1.119 3.182.354l3.536-3.536c.765-.765.635-2.193-.354-3.182-.99-.99-2.417-1.119-3.182-.354L7.661 3.803zm-.32 7.392a.5.5 0 11.707.707l-2.315 2.314c-1.187 1.188-3.242 1-4.596-.353-1.354-1.354-1.54-3.41-.353-4.596L4.318 5.73c1.187-1.187 3.242-1 4.596.354a.5.5 0 01-.707.707c-.989-.99-2.416-1.12-3.182-.354L1.49 9.974c-.766.765-.636 2.193.353 3.182.99.989 2.417 1.119 3.182.353l2.315-2.314z"></path></svg></a>6.3.1 _analyze API</h2>
<p>Elasticsearch 에서는 분석된 문장을 <code class="euiCode" data-code-language="text">_analyze</code> API를 이용해서 확인할 수 있습니다. 토크나이저는 <code class="euiCode" data-code-language="text">tokenizer</code>, 토큰 필터는 <code class="euiCode" data-code-language="text">filter</code> 항목의 값으로 입력하면 됩니다. 토크나이저는 하나만 적용되기 때문에 바로 입력하고, 토큰필터는 여러개를 적용할 수 있기 때문에 <strong>[ ]</strong> 안에 배열 형식으로 입력합니다. <strong>&quot;The quick brown fox jumps over the lazy dog&quot;</strong> 문장을 <code class="euiCode" data-code-language="text">whitespace</code> 토크나이저와 <code class="euiCode" data-code-language="text">lowercase</code>, <code class="euiCode" data-code-language="text">stop</code>, <code class="euiCode" data-code-language="text">snowball</code> 토큰 필터를 적용하면 다음과 같은 결과를 확인할 수 있습니다.</p>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> _analyze
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The quick brown fox jumps over the lazy dog&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;whitespace&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;stop&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;snowball&quot;</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>토크나이저, 토큰필터를 이용해 처리된 <code class="euiCode" data-code-language="text">&quot;token&quot; : &quot;jump&quot;</code>, <code class="euiCode" data-code-language="text">&quot;token&quot; : &quot;lazi&quot;</code> 같은 결과들을 확인할 수 있습니다.</p>
<p>여러 토큰 필터를 입력 할 때는 순서가 중요하며 만약에 <code class="euiCode" data-code-language="text">stop</code> 토큰 필터를 <code class="euiCode" data-code-language="text">lowercase</code> 보다 먼저 놓게 되면 <code class="euiCode" data-code-language="text">stop</code> 토큰필터 처리시 대문자로 시작하는 **&quot;The&quot;**는 불용어로 간주되지 않아 그냥 남아있게 됩니다. 그 후에 <code class="euiCode" data-code-language="text">lowercase</code>가 적용되어 소문자 **&quot;the&quot;**가 최종 검색 텀으로 역 색인에 남아있게 됩니다.</p>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> _analyze
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The quick brown fox jumps over the lazy dog&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;whitespace&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;stop&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;snowball&quot;</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>애널라이저는 <code class="euiCode" data-code-language="text">_analyze</code> API에서 <code class="euiCode" data-code-language="text">analyzer</code> 항목으로 적용해서 사용이 가능합니다. 애널라이저는 <strong>캐릭터 필터</strong>, <strong>토크나이저</strong> 그리고 <strong>토큰 필터</strong>들을 조합해서 사용자 정의 애널라이저를 만들 수도 있고, Elasticsearch 에 사전에 정의되어 있어 바로 사용 가능 한 애널라이저들도 있습니다. 앞서 실행한 <code class="euiCode" data-code-language="text">whitespace</code> 토크나이저 그리고 <code class="euiCode" data-code-language="text">lowercase</code>, <code class="euiCode" data-code-language="text">stop</code>, <code class="euiCode" data-code-language="text">snowball</code> 토큰필터들을 조합한 것 것이 <strong><code class="euiCode" data-code-language="text">snowball</code></strong> 애널라이저 입니다. 다음은 <strong><code class="euiCode" data-code-language="text">snowball</code></strong> 애널라이저를 적용해서 <strong>&quot;The quick brown fox jumps over the lazy dog&quot;</strong> 문장을 분석한 예제입니다.</p>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> _analyze
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The quick brown fox jumps over the lazy dog&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;snowball&quot;</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p><strong><code class="euiCode" data-code-language="text">snowball</code></strong> 애널라이저를 사용한 결과는 앞의 <strong><code class="euiCode" data-code-language="text">whitespace</code></strong> 토크나이저 그리고 <strong><code class="euiCode" data-code-language="text">lowercase</code></strong>, <strong><code class="euiCode" data-code-language="text">stop</code></strong>, <strong><code class="euiCode" data-code-language="text">snowball</code></strong> 토큰필터를 사용한 결과와 동일하게 나타납니다.</p>
<p>인덱스의 매핑(mappings) 설정에 snowball 애널라이저를 적용하고 &quot;The quick brown fox jumps over the lazy dog&quot; 값을 색인하면 <strong>fox</strong>, <strong>jump</strong>, <strong>lazi</strong> 등의 단어가 검색 텀으로 저장됩니다. <code class="euiCode" data-code-language="text">match</code> 쿼리로 검색을 수행하면 입력한 검색어도 앞에서 적용한 <code class="euiCode" data-code-language="text">snowball</code> 애널라이저를 똑같이 거치게 됩니다. <strong>jumps</strong> 또는 <strong>jumping</strong> 등으로 검색을 수행하면 <code class="euiCode" data-code-language="text">lowercase</code>, <code class="euiCode" data-code-language="text">snowball</code>토큰 필터 등이 적용되어 검색어를 <strong>jump</strong>로 바꾸어 검색합니다.</p>
<p>인덱스에 애널라이저는 아래 예제와 같이 지정합니다. 다음은 my_index2 인덱스의 message 필드에 snowball 애널라이저를 적용한 예제입니다. 매핑에 대해서는 다음 장에서 더 자세히 설명하겠습니다.</p>
<div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">PUT</span> my_index2
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;message&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;snowball&quot;</span>
</span><span class="euiCodeBlock__line">      <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<div class="euiCallOut euiCallOut--warning docCallOut"><div class="euiText euiText--small"><div class="euiTextColor euiTextColor--default"><p>6.x 이전 버전의 매핑에서는 <code class="euiCode" data-code-language="text">&quot;mappings&quot;</code> |<code class="euiCode" data-code-language="text">&quot;properties&quot;</code>  사이에  도큐먼트 타입 값이 들어갑니다.</p></div></div></div>
<p>위에서 생성한 my_index2 인덱스에 <code class="euiCode" data-code-language="text">&quot;message&quot;: &quot;The quick brown fox jumps over the lazy dog&quot;</code> 값을 넣고 <code class="euiCode" data-code-language="text">jumping</code> 으로 검색을 해 보도록 하겠습니다.</p>
<div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">PUT</span> my_index2<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">1</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The quick brown fox jumps over the lazy dog&quot;</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>match 쿼리로 <strong>jump</strong>, <strong>jumping</strong> 또는 <strong>jumps</strong> 중 어떤 값으로 검색 해도 결과가 나타납니다.</p>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> my_index2<span class="token operator">/</span>_search
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jumping&quot;</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p><figure class="euiImage euiImage--hasShadow euiImage--allowFullScreen euiImage--original"><button type="button" aria-label="Open fullscreen jumping 을 검색 할 때 실제로 jump 로 검색됩니다. image" class="euiImage__button" data-test-subj="activateFullScreenButton"><img src="/L1VzZXJzL2tpbWptaW4vZ2l0L2RvY3Mta3IvZXNndWlkZTc/assets/06-03_search_jump.png" alt="jumping 을 검색 할 때 실제로 jump 로 검색됩니다." class="euiImage__img" title="jumping 을 검색 할 때 실제로 jump 로 검색됩니다."/><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium euiIcon--ghost euiImage__icon" focusable="false" role="img" aria-hidden="true"><path d="M13 3v4h-1V4H9V3h4zM3 3h4v1H4v3H3V3zm10 10H9v-1h3V9h1v4zM3 13V9h1v3h3v1H3zM0 1.994C0 .893.895 0 1.994 0h12.012C15.107 0 16 .895 16 1.994v12.012A1.995 1.995 0 0114.006 16H1.994A1.995 1.995 0 010 14.006V1.994zm1 0v12.012c0 .548.446.994.994.994h12.012a.995.995 0 00.994-.994V1.994A.995.995 0 0014.006 1H1.994A.995.995 0 001 1.994z" fill-rule="evenodd"></path></svg></button></figure></p>
<h2 id="632-term-쿼리" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#632-term-쿼리" rel="noreferrer" aria-label="6.3.2 Term 쿼리 permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium" focusable="false" role="img" aria-hidden="true"><path d="M7.66 3.803a.5.5 0 11-.706-.707L9.268.78c1.187-1.187 3.242-1 4.596.354s1.54 3.409.354 4.596l-3.536 3.536c-1.187 1.187-3.242 1-4.596-.354a.5.5 0 11.707-.707c.99.99 2.417 1.119 3.182.354l3.536-3.536c.765-.765.635-2.193-.354-3.182-.99-.99-2.417-1.119-3.182-.354L7.661 3.803zm-.32 7.392a.5.5 0 11.707.707l-2.315 2.314c-1.187 1.188-3.242 1-4.596-.353-1.354-1.354-1.54-3.41-.353-4.596L4.318 5.73c1.187-1.187 3.242-1 4.596.354a.5.5 0 01-.707.707c-.989-.99-2.416-1.12-3.182-.354L1.49 9.974c-.766.765-.636 2.193.353 3.182.99.989 2.417 1.119 3.182.353l2.315-2.314z"></path></svg></a>6.3.2 Term 쿼리</h2>
<p>Elasticsearch에서 제공하는 쿼리 중에는 <code class="euiCode" data-code-language="text">term</code> 쿼리가 있습니다. <code class="euiCode" data-code-language="text">match</code> 쿼리와 문법은 유사하지만 <code class="euiCode" data-code-language="text">term</code> 쿼리는 입력한 검색어는 애널라이저를 적용하지 않고 입력된 검색어 그대로 일치하는 텀을 찾습니다. 따라서 <strong>jumps</strong>, <strong>jumping</strong> 으로 검색하면 결과가 나타나지 않고 <strong>jump</strong>로 검색해야 결과가 나타납니다.</p>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> my_index2<span class="token operator">/</span>_search
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;term&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jumps&quot;</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> my_index2<span class="token operator">/</span>_search
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;term&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jump&quot;</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>이렇게 도큐먼트의 원문은 <strong>jumps</strong> 이지만 어떤 쿼리를 사용하느냐에 따라 원문과 같은 <strong>jumps</strong> 검색어를 넣어도 검색이 되지 않는 경우가 있습니다.</p>
<div class="euiCallOut euiCallOut--danger docCallOut"><div class="euiText euiText--small"><div class="euiTextColor euiTextColor--default"><p>텍스트 분석(Analysis) 과정은 검색에 사용되는 <strong>역 인덱스</strong>에만 관여합니다. 원본 데이터는 변하지 않으므로 쿼리 결과의 <strong>_source</strong> 항목에는 항상 <strong>원본 데이터</strong>가 나옵니다.</p></div></div></div>
<p>지금까지 본 것 처럼 Elasticsearch는 데이터를 실제로 검색에 사용되는 텀(Term) 으로 분석 과정을 거쳐 저장하기 때문에 검색 시 대소문자, 단수나 복수, 원형 여부와 상관 없이 검색이 가능합니다. 이러한 Elasticsearch의 특징을 <a href="/krEsguide7/esG7-05-01-fulltext">풀 텍스트 검색(Full Text Search)</a>  이라고 하며 한국어로 <strong>전문 검색</strong> 이라고도 합니다.</p>
<p>앞에서 설명한 것들 외에도 elasticsearch에서 사용 가능한 애널라이저, 캐릭터 필터, 토크나이저, 토큰필터 들의 목록은 공식 <a class="euiLink euiLink--primary" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-analyzers.html" rel="">홈페이지 도큐먼트<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--small euiIcon-isLoading euiLink__externalIcon" focusable="false" role="img" aria-label="External link" aria-hidden="true"></svg></a>에서 확인이 가능합니다.</p>
<h2 id="633-사용자-정의-애널라이저---custom-analyzer" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#633-사용자-정의-애널라이저---custom-analyzer" rel="noreferrer" aria-label="6.3.3 사용자 정의 애널라이저 - Custom Analyzer permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium" focusable="false" role="img" aria-hidden="true"><path d="M7.66 3.803a.5.5 0 11-.706-.707L9.268.78c1.187-1.187 3.242-1 4.596.354s1.54 3.409.354 4.596l-3.536 3.536c-1.187 1.187-3.242 1-4.596-.354a.5.5 0 11.707-.707c.99.99 2.417 1.119 3.182.354l3.536-3.536c.765-.765.635-2.193-.354-3.182-.99-.99-2.417-1.119-3.182-.354L7.661 3.803zm-.32 7.392a.5.5 0 11.707.707l-2.315 2.314c-1.187 1.188-3.242 1-4.596-.353-1.354-1.354-1.54-3.41-.353-4.596L4.318 5.73c1.187-1.187 3.242-1 4.596.354a.5.5 0 01-.707.707c-.989-.99-2.416-1.12-3.182-.354L1.49 9.974c-.766.765-.636 2.193.353 3.182.99.989 2.417 1.119 3.182.353l2.315-2.314z"></path></svg></a>6.3.3 사용자 정의 애널라이저 - Custom Analyzer</h2>
<p><strong>_analyze API</strong>로 애널라이저, 토크나이저, 토큰필터들의 테스트가 가능하지만, 실제로 인덱스에 저장되는 데이터의 처리에 대한 설정은 <strong>애널라이저만 적용할 수 있습니다</strong>. 인덱스 매핑에 애널라이저를 적용 할 때 보통은 이미 정의되어 제공되는 애널라이저 보다는 토크나이저, 토큰필터 등을 조합하여 만든 **사용자 정의 애널라이저(Custom Analyzer)**를 주로 사용합니다. 이미 정의된 애널라이저들은 매핑에 정의한 text 필드의 <strong>analyzer</strong> 항목에 이름을 명시하기만 하면 쉽게 적용이 가능합니다.</p>
<p>이 책에서는 사용자 정의 애널라이저만 설명하겠으니 Elasticsearch에 사전에 만들어진 애널라이저들은 <a class="euiLink euiLink--primary" href="https://www.elastic.co/" rel="">https://www.elastic.co/<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--small euiIcon-isLoading euiLink__externalIcon" focusable="false" role="img" aria-label="External link" aria-hidden="true"></svg></a> 홈페이지의 공식 도큐먼트를 참고하시기 바랍니다. 매핑에 아무 설정을 하지 않는 경우 디폴트로 적용되는 애널라이저는 <strong>standard</strong> 애널라이저 입니다.</p>
<p>사용자 정의 애널라이저는 인덱스 <strong>settings</strong> 의 <code class="euiCode" data-code-language="text">&quot;index&quot; : { &quot;analysis&quot; :</code> 부분에 정의합니다. 생성한 다음에는 해당 인덱스에서 <code class="euiCode" data-code-language="text">GET</code> 또는 <code class="euiCode" data-code-language="text">POST &lt;인덱스명&gt;/_analyze</code> 명령으로 사용이 가능합니다. 다음은 <strong>my_index3</strong> 안에 <code class="euiCode" data-code-language="text">whitespace</code> 토큰크나이저 그리고 <code class="euiCode" data-code-language="text">lowercase</code>, <code class="euiCode" data-code-language="text">stop</code>, <code class="euiCode" data-code-language="text">snowball</code> 토큰필터를 사용하는 <code class="euiCode" data-code-language="text">my_custom_analyzer</code> 라는 이름의 애널라이저를 추가하는 예제입니다.</p>
<div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">PUT</span> my_index3
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;analysis&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;my_custom_analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;whitespace&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">              <span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">              <span class="token string">&quot;stop&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">              <span class="token string">&quot;snowball&quot;</span>
</span><span class="euiCodeBlock__line">            <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line">          <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">        <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">      <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>이제 <strong>my_index3</strong> 에서 <strong>my_custom_analyzer</strong>를 사용할 수 있습니다.</p>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> my_index3<span class="token operator">/</span>_analyze
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my_custom_analyzer&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;text&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;The quick brown fox jumps over the lazy dog&quot;</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<h3 id="사용자-정의-토큰필터" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#사용자-정의-토큰필터" rel="noreferrer" aria-label="사용자 정의 토큰필터 permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium" focusable="false" role="img" aria-hidden="true"><path d="M7.66 3.803a.5.5 0 11-.706-.707L9.268.78c1.187-1.187 3.242-1 4.596.354s1.54 3.409.354 4.596l-3.536 3.536c-1.187 1.187-3.242 1-4.596-.354a.5.5 0 11.707-.707c.99.99 2.417 1.119 3.182.354l3.536-3.536c.765-.765.635-2.193-.354-3.182-.99-.99-2.417-1.119-3.182-.354L7.661 3.803zm-.32 7.392a.5.5 0 11.707.707l-2.315 2.314c-1.187 1.188-3.242 1-4.596-.353-1.354-1.354-1.54-3.41-.353-4.596L4.318 5.73c1.187-1.187 3.242-1 4.596.354a.5.5 0 01-.707.707c-.989-.99-2.416-1.12-3.182-.354L1.49 9.974c-.766.765-.636 2.193.353 3.182.99.989 2.417 1.119 3.182.353l2.315-2.314z"></path></svg></a>사용자 정의 토큰필터</h3>
<p>토크나이저, 토큰필터의 경우에도 옵션을 지정하는 경우에는 사용자 정의 토크나이저, 토큰필터로 만들어 추가해야 합니다. 다음은 <code class="euiCode" data-code-language="text">stop</code> 토큰필터에 **&quot;brown&quot;**을 불용어로 적용한 <strong>my_stop_filter</strong> 사용자 정의 토큰필터를 생성하고 이것을 <strong>my_custom_analyzer</strong>에서 사용하도록 설정 한 예제입니다.</p>
<div class="euiCallOut euiCallOut--warning docCallOut"><div class="euiText euiText--small"><div class="euiTextColor euiTextColor--default"><p>아래 명령 실행 전에 기존 my_index3 인덱스는 먼저 삭제해야 합니다.</p></div></div></div>
<div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">PUT</span> my_index3
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;analysis&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;my_custom_analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;whitespace&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">              <span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">              <span class="token string">&quot;my_stop_filter&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">              <span class="token string">&quot;snowball&quot;</span>
</span><span class="euiCodeBlock__line">            <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line">          <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;my_stop_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;stop&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;stopwords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">              <span class="token string">&quot;brown&quot;</span>
</span><span class="euiCodeBlock__line">            <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line">          <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">        <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">      <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p><figure class="euiImage euiImage--hasShadow euiImage--allowFullScreen euiImage--original"><button type="button" aria-label="Open fullscreen filter 에서 선언한 my_stop_filter 를 analyzer 에서 사용 image" class="euiImage__button" data-test-subj="activateFullScreenButton"><img src="/L1VzZXJzL2tpbWptaW4vZ2l0L2RvY3Mta3IvZXNndWlkZTc/assets/06-03_custom_analyzer.png" alt="filter 에서 선언한 my_stop_filter 를 analyzer 에서 사용" class="euiImage__img" title="filter 에서 선언한 my_stop_filter 를 analyzer 에서 사용"/><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium euiIcon--ghost euiImage__icon" focusable="false" role="img" aria-hidden="true"><path d="M13 3v4h-1V4H9V3h4zM3 3h4v1H4v3H3V3zm10 10H9v-1h3V9h1v4zM3 13V9h1v3h3v1H3zM0 1.994C0 .893.895 0 1.994 0h12.012C15.107 0 16 .895 16 1.994v12.012A1.995 1.995 0 0114.006 16H1.994A1.995 1.995 0 010 14.006V1.994zm1 0v12.012c0 .548.446.994.994.994h12.012a.995.995 0 00.994-.994V1.994A.995.995 0 0014.006 1H1.994A.995.995 0 001 1.994z" fill-rule="evenodd"></path></svg></button></figure></p>
<p>이제 다시 <strong>my_custom_analyzer</strong>를 사용해서 텍스트를 분석 해 보면 <strong>brown</strong>이 불용어 처리가 되어 사라진 것을 확인할 수 있습니다.</p>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> my_index3<span class="token operator">/</span>_analyze
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my_custom_analyzer&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;text&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;The quick brown fox jumps over the lazy dog&quot;</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<h3 id="매핑에-사용자-정의-애널라이저-적용" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#매핑에-사용자-정의-애널라이저-적용" rel="noreferrer" aria-label="매핑에 사용자 정의 애널라이저 적용 permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium" focusable="false" role="img" aria-hidden="true"><path d="M7.66 3.803a.5.5 0 11-.706-.707L9.268.78c1.187-1.187 3.242-1 4.596.354s1.54 3.409.354 4.596l-3.536 3.536c-1.187 1.187-3.242 1-4.596-.354a.5.5 0 11.707-.707c.99.99 2.417 1.119 3.182.354l3.536-3.536c.765-.765.635-2.193-.354-3.182-.99-.99-2.417-1.119-3.182-.354L7.661 3.803zm-.32 7.392a.5.5 0 11.707.707l-2.315 2.314c-1.187 1.188-3.242 1-4.596-.353-1.354-1.354-1.54-3.41-.353-4.596L4.318 5.73c1.187-1.187 3.242-1 4.596.354a.5.5 0 01-.707.707c-.989-.99-2.416-1.12-3.182-.354L1.49 9.974c-.766.765-.636 2.193.353 3.182.99.989 2.417 1.119 3.182.353l2.315-2.314z"></path></svg></a>매핑에 사용자 정의 애널라이저 적용</h3>
<p>애널라이저를 실제 인덱스에 입력할 데이터에 적용하려면 <strong>settings</strong> 부분에서 만든 애널라이저를 <strong>mappings</strong> 의 text 필드별로 지정합니다. 앞에서 만든 <strong>my_custom_analyzer</strong> 를 <strong>message</strong> 필드에 적용하는 방법은 다음과 같습니다. <strong>setting</strong> 부분은 위 예제와 동일합니다.</p>
<div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">PUT</span> my_index3
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;analysis&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;my_custom_analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;whitespace&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">              <span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">              <span class="token string">&quot;my_stop_filter&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">              <span class="token string">&quot;snowball&quot;</span>
</span><span class="euiCodeBlock__line">            <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line">          <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;my_stop_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;stop&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;stopwords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">              <span class="token string">&quot;brown&quot;</span>
</span><span class="euiCodeBlock__line">            <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line">          <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">        <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">      <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;message&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my_custom_analyzer&quot;</span>
</span><span class="euiCodeBlock__line">      <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>이제 <strong>my_index</strong> 에 <strong>message</strong> 필드에 입력되는 값은 위에 지정된 <strong>my_custom_analyzer</strong> 애널라이저가 적용됩니다. my_index의 message 필드에 값을 입력하고 검색 해 보면 <strong>brown</strong>은 불용어 처리가 되어 검색되지 않는 것을 확인할 수 있습니다.</p>
<div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">PUT</span> my_index3<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">1</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The quick brown fox jumps over the lazy dog&quot;</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> my_index3<span class="token operator">/</span>_search
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;brown&quot;</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<h2 id="634-텀-벡터---_termvectors-api" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#634-텀-벡터---_termvectors-api" rel="noreferrer" aria-label="6.3.4 텀 벡터 - _termvectors API permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium" focusable="false" role="img" aria-hidden="true"><path d="M7.66 3.803a.5.5 0 11-.706-.707L9.268.78c1.187-1.187 3.242-1 4.596.354s1.54 3.409.354 4.596l-3.536 3.536c-1.187 1.187-3.242 1-4.596-.354a.5.5 0 11.707-.707c.99.99 2.417 1.119 3.182.354l3.536-3.536c.765-.765.635-2.193-.354-3.182-.99-.99-2.417-1.119-3.182-.354L7.661 3.803zm-.32 7.392a.5.5 0 11.707.707l-2.315 2.314c-1.187 1.188-3.242 1-4.596-.353-1.354-1.354-1.54-3.41-.353-4.596L4.318 5.73c1.187-1.187 3.242-1 4.596.354a.5.5 0 01-.707.707c-.989-.99-2.416-1.12-3.182-.354L1.49 9.974c-.766.765-.636 2.193.353 3.182.99.989 2.417 1.119 3.182.353l2.315-2.314z"></path></svg></a>6.3.4 텀 벡터 - _termvectors API</h2>
<p>색인된 도큐먼트의 역 인덱스의 내용을 확인할 때는 도큐먼트 별로 <strong>_termvectors</strong> API를이용해서 확인이 가능합니다. <code class="euiCode" data-code-language="text">GET &lt;인덱스&gt;/_termvectors/&lt;도큐먼트id&gt;?fields=&lt;필드명&gt;</code> 형식으로 사용하며 <strong>6.x</strong> 이전 버전에서는 <code class="euiCode" data-code-language="text">GET &lt;인덱스&gt;/&lt;도큐먼트 타입&gt;/&lt;도큐먼트id&gt;/_termvectors?fields=&lt;필드명&gt;</code> 형식으로 사용합니다.</p>
<p>다음은 앞에서 입력한 <strong>my_index3/_doc/1</strong> 도큐먼트의 <strong>message</strong> 필드를 확인하는 예제입니다.</p>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> my_index3<span class="token operator">/</span>_termvectors<span class="token operator">/</span><span class="token number">1</span><span class="token operator">?</span>fields<span class="token operator">=</span>message
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>여러개의 필드를 같이 확인하고 싶을 때는 <code class="euiCode" data-code-language="text">?fields=field1,field2</code> 처럼 쉼표로 나열해서 볼 수 있습니다.</p></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div class="euiText euiText--small"><div class="euiTextColor euiTextColor--subdued">Last updated: Jan 25th, 2022</div></div></div></div></div></div></div></div><footer class="docChromeFooter" data-elastic-exclude="true"><div class="euiFlexGroup euiFlexGroup--justifyContentSpaceAround euiFlexGroup--directionRow euiFlexGroup--responsive"><div class="euiFlexItem euiFlexItem--flexGrowZero docChromeFooter__container"><div class="euiFlexGroup euiFlexGroup--gutterExtraLarge euiFlexGroup--justifyContentSpaceBetween euiFlexGroup--directionRow euiFlexGroup--responsive"><div class="euiFlexItem"><div class="euiText euiText--small"><div class="euiTextColor euiTextColor--ghost"><p>Elasticsearch is a trademark of Elasticsearch B.V., registered in the U.S. and in other countries.</p><p>Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the Apache Software Foundation in the United States and/or other countries.</p><p> <a class="euiLink euiLink--ghost" href="https://www.elastic.co/legal/trademarks" rel="">Trademarks</a><span class="docChromeFooter__divide">|</span><a class="euiLink euiLink--ghost" href="https://www.elastic.co/legal/terms-of-use" rel="">Terms of Use</a><span class="docChromeFooter__divide">|</span><a class="euiLink euiLink--ghost" href="https://www.elastic.co/legal/privacy-statement" rel="">Privacy</a><span class="docChromeFooter__divide">|</span>© <!-- -->2022<!-- --> Elasticsearch B.V. All Rights Reserved</p></div></div></div><div class="euiFlexItem euiFlexItem--flexGrowZero"></div><div class="euiFlexItem euiFlexItem--flexGrowZero"><figure class="euiImage docChromeFooter__logo"><img style="max-width:xs;max-height:xs;width:auto" src="/assets/images/logo-elastic-vertical-reverse.svg" class="euiImage__img" alt="Elastic logo"/></figure></div></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"bundle":"!function(e,n){\"object\"==typeof exports\u0026\u0026\"object\"==typeof module?module.exports=n(require(\"mdxJsReact\"),require(\"React\")):\"function\"==typeof define\u0026\u0026define.amd?define([\"mdxJsReact\",\"React\"],n):\"object\"==typeof exports?exports.MDXContent=n(require(\"mdxJsReact\"),require(\"React\")):e.MDXContent=n(e.mdxJsReact,e.React)}(this,((e,n)=\u003e(()=\u003e{\"use strict\";var t={24:e=\u003e{e.exports=n},825:n=\u003e{n.exports=e}},l={};function a(e){var n=l[e];if(void 0!==n)return n.exports;var s=l[e]={exports:{}};return t[e](s,s.exports,a),s.exports}a.n=e=\u003e{var n=e\u0026\u0026e.__esModule?()=\u003ee.default:()=\u003ee;return a.d(n,{a:n}),n},a.d=(e,n)=\u003e{for(var t in n)a.o(n,t)\u0026\u0026!a.o(e,t)\u0026\u0026Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.o=(e,n)=\u003eObject.prototype.hasOwnProperty.call(e,n),a.r=e=\u003e{\"undefined\"!=typeof Symbol\u0026\u0026Symbol.toStringTag\u0026\u0026Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var s={};return(()=\u003e{a.r(s),a.d(s,{default:()=\u003el});var e=a(825),n=a(24),t=a.n(n);const l=function(){var n=arguments.length\u003e0\u0026\u0026void 0!==arguments[0]?arguments[0]:{},l=Object.assign({},(0,e.useMDXComponents)(),n.components),a=l.wrapper;return a?t().createElement(a,n,t().createElement(s)):s();function s(){var l=Object.assign({p:\"p\",h2:\"h2\",code:\"code\",strong:\"strong\",pre:\"pre\",img:\"img\",a:\"a\",h3:\"h3\"},(0,e.useMDXComponents)(),n.components),a=l.DocTabs,s=l.DocTab,r=l.DocCallOut,c=l.DocLink;return r||o(\"DocCallOut\",!0),c||o(\"DocLink\",!0),s||o(\"DocTab\",!0),a||o(\"DocTabs\",!0),t().createElement(t().Fragment,null,t().createElement(l.p,null,\"Elasticsearch 에는 애널라이저를 조합하고 그 동작을 자세히 확인할 수 있는 API 들이 있습니다. 계속해서 애널라이저와 관련된 기능들에 대해 살펴보겠습니다.\"),\"\\n\",t().createElement(l.h2,{id:\"631-_analyze-api\"},\"6.3.1 _analyze API\"),\"\\n\",t().createElement(l.p,null,\"Elasticsearch 에서는 분석된 문장을 \",t().createElement(l.code,{display:\"inline\"},\"_analyze\"),\" API를 이용해서 확인할 수 있습니다. 토크나이저는 \",t().createElement(l.code,{display:\"inline\"},\"tokenizer\"),\", 토큰 필터는 \",t().createElement(l.code,{display:\"inline\"},\"filter\"),\" 항목의 값으로 입력하면 됩니다. 토크나이저는 하나만 적용되기 때문에 바로 입력하고, 토큰필터는 여러개를 적용할 수 있기 때문에 \",t().createElement(l.strong,null,\"[ ]\"),\" 안에 배열 형식으로 입력합니다. \",t().createElement(l.strong,null,'\"The quick brown fox jumps over the lazy dog\"'),\" 문장을 \",t().createElement(l.code,{display:\"inline\"},\"whitespace\"),\" 토크나이저와 \",t().createElement(l.code,{display:\"inline\"},\"lowercase\"),\", \",t().createElement(l.code,{display:\"inline\"},\"stop\"),\", \",t().createElement(l.code,{display:\"inline\"},\"snowball\"),\" 토큰 필터를 적용하면 다음과 같은 결과를 확인할 수 있습니다.\"),\"\\n\",t().createElement(a,null,t().createElement(s,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'GET _analyze\\n{\\n  \"text\": \"The quick brown fox jumps over the lazy dog\",\\n  \"tokenizer\": \"whitespace\",\\n  \"filter\": [\\n    \"lowercase\",\\n    \"stop\",\\n    \"snowball\"\\n  ]\\n}\\n'))),t().createElement(s,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"tokens\" : [\\n    {\\n      \"token\" : \"quick\",\\n      \"start_offset\" : 4,\\n      \"end_offset\" : 9,\\n      \"type\" : \"word\",\\n      \"position\" : 1\\n    },\\n    {\\n      \"token\" : \"brown\",\\n      \"start_offset\" : 10,\\n      \"end_offset\" : 15,\\n      \"type\" : \"word\",\\n      \"position\" : 2\\n    },\\n    {\\n      \"token\" : \"fox\",\\n      \"start_offset\" : 16,\\n      \"end_offset\" : 19,\\n      \"type\" : \"word\",\\n      \"position\" : 3\\n    },\\n    {\\n      \"token\" : \"jump\",\\n      \"start_offset\" : 20,\\n      \"end_offset\" : 25,\\n      \"type\" : \"word\",\\n      \"position\" : 4\\n    },\\n    {\\n      \"token\" : \"over\",\\n      \"start_offset\" : 26,\\n      \"end_offset\" : 30,\\n      \"type\" : \"word\",\\n      \"position\" : 5\\n    },\\n    {\\n      \"token\" : \"lazi\",\\n      \"start_offset\" : 35,\\n      \"end_offset\" : 39,\\n      \"type\" : \"word\",\\n      \"position\" : 7\\n    },\\n    {\\n      \"token\" : \"dog\",\\n      \"start_offset\" : 40,\\n      \"end_offset\" : 43,\\n      \"type\" : \"word\",\\n      \"position\" : 8\\n    }\\n  ]\\n}\\n')))),\"\\n\",t().createElement(l.p,null,\"토크나이저, 토큰필터를 이용해 처리된 \",t().createElement(l.code,{display:\"inline\"},'\"token\" : \"jump\"'),\", \",t().createElement(l.code,{display:\"inline\"},'\"token\" : \"lazi\"'),\" 같은 결과들을 확인할 수 있습니다.\"),\"\\n\",t().createElement(l.p,null,\"여러 토큰 필터를 입력 할 때는 순서가 중요하며 만약에 \",t().createElement(l.code,{display:\"inline\"},\"stop\"),\" 토큰 필터를 \",t().createElement(l.code,{display:\"inline\"},\"lowercase\"),\" 보다 먼저 놓게 되면 \",t().createElement(l.code,{display:\"inline\"},\"stop\"),' 토큰필터 처리시 대문자로 시작하는 **\"The\"**는 불용어로 간주되지 않아 그냥 남아있게 됩니다. 그 후에 ',t().createElement(l.code,{display:\"inline\"},\"lowercase\"),'가 적용되어 소문자 **\"the\"**가 최종 검색 텀으로 역 색인에 남아있게 됩니다.'),\"\\n\",t().createElement(a,null,t().createElement(s,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'GET _analyze\\n{\\n  \"text\": \"The quick brown fox jumps over the lazy dog\",\\n  \"tokenizer\": \"whitespace\",\\n  \"filter\": [\\n    \"stop\",\\n    \"lowercase\",\\n    \"snowball\"\\n  ]\\n}\\n'))),t().createElement(s,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"tokens\" : [\\n    {\\n      \"token\" : \"the\",\\n      \"start_offset\" : 0,\\n      \"end_offset\" : 3,\\n      \"type\" : \"word\",\\n      \"position\" : 0\\n    },\\n    {\\n      \"token\" : \"quick\",\\n      \"start_offset\" : 4,\\n      \"end_offset\" : 9,\\n      \"type\" : \"word\",\\n      \"position\" : 1\\n    },\\n    {\\n      \"token\" : \"brown\",\\n      \"start_offset\" : 10,\\n      \"end_offset\" : 15,\\n      \"type\" : \"word\",\\n      \"position\" : 2\\n    },\\n    {\\n      \"token\" : \"fox\",\\n      \"start_offset\" : 16,\\n      \"end_offset\" : 19,\\n      \"type\" : \"word\",\\n      \"position\" : 3\\n    },\\n    {\\n      \"token\" : \"jump\",\\n      \"start_offset\" : 20,\\n      \"end_offset\" : 25,\\n      \"type\" : \"word\",\\n      \"position\" : 4\\n    },\\n    {\\n      \"token\" : \"over\",\\n      \"start_offset\" : 26,\\n      \"end_offset\" : 30,\\n      \"type\" : \"word\",\\n      \"position\" : 5\\n    },\\n    {\\n      \"token\" : \"lazi\",\\n      \"start_offset\" : 35,\\n      \"end_offset\" : 39,\\n      \"type\" : \"word\",\\n      \"position\" : 7\\n    },\\n    {\\n      \"token\" : \"dog\",\\n      \"start_offset\" : 40,\\n      \"end_offset\" : 43,\\n      \"type\" : \"word\",\\n      \"position\" : 8\\n    }\\n  ]\\n}\\n')))),\"\\n\",t().createElement(l.p,null,\"애널라이저는 \",t().createElement(l.code,{display:\"inline\"},\"_analyze\"),\" API에서 \",t().createElement(l.code,{display:\"inline\"},\"analyzer\"),\" 항목으로 적용해서 사용이 가능합니다. 애널라이저는 \",t().createElement(l.strong,null,\"캐릭터 필터\"),\", \",t().createElement(l.strong,null,\"토크나이저\"),\" 그리고 \",t().createElement(l.strong,null,\"토큰 필터\"),\"들을 조합해서 사용자 정의 애널라이저를 만들 수도 있고, Elasticsearch 에 사전에 정의되어 있어 바로 사용 가능 한 애널라이저들도 있습니다. 앞서 실행한 \",t().createElement(l.code,{display:\"inline\"},\"whitespace\"),\" 토크나이저 그리고 \",t().createElement(l.code,{display:\"inline\"},\"lowercase\"),\", \",t().createElement(l.code,{display:\"inline\"},\"stop\"),\", \",t().createElement(l.code,{display:\"inline\"},\"snowball\"),\" 토큰필터들을 조합한 것 것이 \",t().createElement(l.strong,null,t().createElement(l.code,{display:\"inline\"},\"snowball\")),\" 애널라이저 입니다. 다음은 \",t().createElement(l.strong,null,t().createElement(l.code,{display:\"inline\"},\"snowball\")),\" 애널라이저를 적용해서 \",t().createElement(l.strong,null,'\"The quick brown fox jumps over the lazy dog\"'),\" 문장을 분석한 예제입니다.\"),\"\\n\",t().createElement(a,null,t().createElement(s,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'GET _analyze\\n{\\n  \"text\": \"The quick brown fox jumps over the lazy dog\",\\n  \"analyzer\": \"snowball\"\\n}\\n'))),t().createElement(s,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"tokens\" : [\\n    {\\n      \"token\" : \"quick\",\\n      \"start_offset\" : 4,\\n      \"end_offset\" : 9,\\n      \"type\" : \"\u003cALPHANUM\u003e\",\\n      \"position\" : 1\\n    },\\n    {\\n      \"token\" : \"brown\",\\n      \"start_offset\" : 10,\\n      \"end_offset\" : 15,\\n      \"type\" : \"\u003cALPHANUM\u003e\",\\n      \"position\" : 2\\n    },\\n    {\\n      \"token\" : \"fox\",\\n      \"start_offset\" : 16,\\n      \"end_offset\" : 19,\\n      \"type\" : \"\u003cALPHANUM\u003e\",\\n      \"position\" : 3\\n    },\\n    {\\n      \"token\" : \"jump\",\\n      \"start_offset\" : 20,\\n      \"end_offset\" : 25,\\n      \"type\" : \"\u003cALPHANUM\u003e\",\\n      \"position\" : 4\\n    },\\n    {\\n      \"token\" : \"over\",\\n      \"start_offset\" : 26,\\n      \"end_offset\" : 30,\\n      \"type\" : \"\u003cALPHANUM\u003e\",\\n      \"position\" : 5\\n    },\\n    {\\n      \"token\" : \"lazi\",\\n      \"start_offset\" : 35,\\n      \"end_offset\" : 39,\\n      \"type\" : \"\u003cALPHANUM\u003e\",\\n      \"position\" : 7\\n    },\\n    {\\n      \"token\" : \"dog\",\\n      \"start_offset\" : 40,\\n      \"end_offset\" : 43,\\n      \"type\" : \"\u003cALPHANUM\u003e\",\\n      \"position\" : 8\\n    }\\n  ]\\n}\\n')))),\"\\n\",t().createElement(l.p,null,t().createElement(l.strong,null,t().createElement(l.code,{display:\"inline\"},\"snowball\")),\" 애널라이저를 사용한 결과는 앞의 \",t().createElement(l.strong,null,t().createElement(l.code,{display:\"inline\"},\"whitespace\")),\" 토크나이저 그리고 \",t().createElement(l.strong,null,t().createElement(l.code,{display:\"inline\"},\"lowercase\")),\", \",t().createElement(l.strong,null,t().createElement(l.code,{display:\"inline\"},\"stop\")),\", \",t().createElement(l.strong,null,t().createElement(l.code,{display:\"inline\"},\"snowball\")),\" 토큰필터를 사용한 결과와 동일하게 나타납니다.\"),\"\\n\",t().createElement(l.p,null,'인덱스의 매핑(mappings) 설정에 snowball 애널라이저를 적용하고 \"The quick brown fox jumps over the lazy dog\" 값을 색인하면 ',t().createElement(l.strong,null,\"fox\"),\", \",t().createElement(l.strong,null,\"jump\"),\", \",t().createElement(l.strong,null,\"lazi\"),\" 등의 단어가 검색 텀으로 저장됩니다. \",t().createElement(l.code,{display:\"inline\"},\"match\"),\" 쿼리로 검색을 수행하면 입력한 검색어도 앞에서 적용한 \",t().createElement(l.code,{display:\"inline\"},\"snowball\"),\" 애널라이저를 똑같이 거치게 됩니다. \",t().createElement(l.strong,null,\"jumps\"),\" 또는 \",t().createElement(l.strong,null,\"jumping\"),\" 등으로 검색을 수행하면 \",t().createElement(l.code,{display:\"inline\"},\"lowercase\"),\", \",t().createElement(l.code,{display:\"inline\"},\"snowball\"),\"토큰 필터 등이 적용되어 검색어를 \",t().createElement(l.strong,null,\"jump\"),\"로 바꾸어 검색합니다.\"),\"\\n\",t().createElement(l.p,null,\"인덱스에 애널라이저는 아래 예제와 같이 지정합니다. 다음은 my_index2 인덱스의 message 필드에 snowball 애널라이저를 적용한 예제입니다. 매핑에 대해서는 다음 장에서 더 자세히 설명하겠습니다.\"),\"\\n\",t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'PUT my_index2\\n{\\n  \"mappings\": {\\n    \"properties\": {\\n      \"message\": {\\n        \"type\": \"text\",\\n        \"analyzer\": \"snowball\"\\n      }\\n    }\\n  }\\n}\\n')),\"\\n\",t().createElement(r,{color:\"warning\"},t().createElement(l.p,null,\"6.x 이전 버전의 매핑에서는 \",t().createElement(l.code,{display:\"inline\"},'\"mappings\"'),\" |\",t().createElement(l.code,{display:\"inline\"},'\"properties\"'),\"  사이에  도큐먼트 타입 값이 들어갑니다.\")),\"\\n\",t().createElement(l.p,null,\"위에서 생성한 my_index2 인덱스에 \",t().createElement(l.code,{display:\"inline\"},'\"message\": \"The quick brown fox jumps over the lazy dog\"'),\" 값을 넣고 \",t().createElement(l.code,{display:\"inline\"},\"jumping\"),\" 으로 검색을 해 보도록 하겠습니다.\"),\"\\n\",t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'PUT my_index2/_doc/1\\n{\\n  \"message\": \"The quick brown fox jumps over the lazy dog\"\\n}\\n')),\"\\n\",t().createElement(l.p,null,\"match 쿼리로 \",t().createElement(l.strong,null,\"jump\"),\", \",t().createElement(l.strong,null,\"jumping\"),\" 또는 \",t().createElement(l.strong,null,\"jumps\"),\" 중 어떤 값으로 검색 해도 결과가 나타납니다.\"),\"\\n\",t().createElement(a,null,t().createElement(s,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'GET my_index2/_search\\n{\\n  \"query\": {\\n    \"match\": {\\n      \"message\": \"jumping\"\\n    }\\n  }\\n}\\n'))),t().createElement(s,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"took\" : 1,\\n  \"timed_out\" : false,\\n  \"_shards\" : {\\n    \"total\" : 1,\\n    \"successful\" : 1,\\n    \"skipped\" : 0,\\n    \"failed\" : 0\\n  },\\n  \"hits\" : {\\n    \"total\" : {\\n      \"value\" : 1,\\n      \"relation\" : \"eq\"\\n    },\\n    \"max_score\" : 0.2876821,\\n    \"hits\" : [\\n      {\\n        \"_index\" : \"my_index2\",\\n        \"_type\" : \"_doc\",\\n        \"_id\" : \"1\",\\n        \"_score\" : 0.2876821,\\n        \"_source\" : {\\n          \"message\" : \"The quick brown fox jumps over the lazy dog\"\\n        }\\n      }\\n    ]\\n  }\\n}\\n')))),\"\\n\",t().createElement(l.p,null,t().createElement(l.img,{src:\"/L1VzZXJzL2tpbWptaW4vZ2l0L2RvY3Mta3IvZXNndWlkZTc/assets/06-03_search_jump.png\",alt:\"jumping 을 검색 할 때 실제로 jump 로 검색됩니다.\"})),\"\\n\",t().createElement(l.h2,{id:\"632-term-쿼리\"},\"6.3.2 Term 쿼리\"),\"\\n\",t().createElement(l.p,null,\"Elasticsearch에서 제공하는 쿼리 중에는 \",t().createElement(l.code,{display:\"inline\"},\"term\"),\" 쿼리가 있습니다. \",t().createElement(l.code,{display:\"inline\"},\"match\"),\" 쿼리와 문법은 유사하지만 \",t().createElement(l.code,{display:\"inline\"},\"term\"),\" 쿼리는 입력한 검색어는 애널라이저를 적용하지 않고 입력된 검색어 그대로 일치하는 텀을 찾습니다. 따라서 \",t().createElement(l.strong,null,\"jumps\"),\", \",t().createElement(l.strong,null,\"jumping\"),\" 으로 검색하면 결과가 나타나지 않고 \",t().createElement(l.strong,null,\"jump\"),\"로 검색해야 결과가 나타납니다.\"),\"\\n\",t().createElement(a,null,t().createElement(s,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'GET my_index2/_search\\n{\\n  \"query\": {\\n    \"term\": {\\n      \"message\": \"jumps\"\\n    }\\n  }\\n}\\n'))),t().createElement(s,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"took\" : 0,\\n  \"timed_out\" : false,\\n  \"_shards\" : {\\n    \"total\" : 1,\\n    \"successful\" : 1,\\n    \"skipped\" : 0,\\n    \"failed\" : 0\\n  },\\n  \"hits\" : {\\n    \"total\" : {\\n      \"value\" : 0,\\n      \"relation\" : \"eq\"\\n    },\\n    \"max_score\" : null,\\n    \"hits\" : [ ]\\n  }\\n}\\n')))),\"\\n\",t().createElement(a,null,t().createElement(s,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'GET my_index2/_search\\n{\\n  \"query\": {\\n    \"term\": {\\n      \"message\": \"jump\"\\n    }\\n  }\\n}\\n'))),t().createElement(s,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"took\" : 0,\\n  \"timed_out\" : false,\\n  \"_shards\" : {\\n    \"total\" : 1,\\n    \"successful\" : 1,\\n    \"skipped\" : 0,\\n    \"failed\" : 0\\n  },\\n  \"hits\" : {\\n    \"total\" : {\\n      \"value\" : 1,\\n      \"relation\" : \"eq\"\\n    },\\n    \"max_score\" : 0.2876821,\\n    \"hits\" : [\\n      {\\n        \"_index\" : \"my_index2\",\\n        \"_type\" : \"_doc\",\\n        \"_id\" : \"1\",\\n        \"_score\" : 0.2876821,\\n        \"_source\" : {\\n          \"message\" : \"The quick brown fox jumps over the lazy dog\"\\n        }\\n      }\\n    ]\\n  }\\n}\\n')))),\"\\n\",t().createElement(l.p,null,\"이렇게 도큐먼트의 원문은 \",t().createElement(l.strong,null,\"jumps\"),\" 이지만 어떤 쿼리를 사용하느냐에 따라 원문과 같은 \",t().createElement(l.strong,null,\"jumps\"),\" 검색어를 넣어도 검색이 되지 않는 경우가 있습니다.\"),\"\\n\",t().createElement(r,{color:\"danger\"},t().createElement(l.p,null,\"텍스트 분석(Analysis) 과정은 검색에 사용되는 \",t().createElement(l.strong,null,\"역 인덱스\"),\"에만 관여합니다. 원본 데이터는 변하지 않으므로 쿼리 결과의 \",t().createElement(l.strong,null,\"_source\"),\" 항목에는 항상 \",t().createElement(l.strong,null,\"원본 데이터\"),\"가 나옵니다.\")),\"\\n\",t().createElement(l.p,null,\"지금까지 본 것 처럼 Elasticsearch는 데이터를 실제로 검색에 사용되는 텀(Term) 으로 분석 과정을 거쳐 저장하기 때문에 검색 시 대소문자, 단수나 복수, 원형 여부와 상관 없이 검색이 가능합니다. 이러한 Elasticsearch의 특징을 \",t().createElement(c,{id:\"esG7-05-01-fulltext\",text:\"풀 텍스트 검색(Full Text Search)\"}),\"  이라고 하며 한국어로 \",t().createElement(l.strong,null,\"전문 검색\"),\" 이라고도 합니다.\"),\"\\n\",t().createElement(l.p,null,\"앞에서 설명한 것들 외에도 elasticsearch에서 사용 가능한 애널라이저, 캐릭터 필터, 토크나이저, 토큰필터 들의 목록은 공식 \",t().createElement(l.a,{href:\"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-analyzers.html\"},\"홈페이지 도큐먼트\"),\"에서 확인이 가능합니다.\"),\"\\n\",t().createElement(l.h2,{id:\"633-사용자-정의-애널라이저---custom-analyzer\"},\"6.3.3 사용자 정의 애널라이저 - Custom Analyzer\"),\"\\n\",t().createElement(l.p,null,t().createElement(l.strong,null,\"_analyze API\"),\"로 애널라이저, 토크나이저, 토큰필터들의 테스트가 가능하지만, 실제로 인덱스에 저장되는 데이터의 처리에 대한 설정은 \",t().createElement(l.strong,null,\"애널라이저만 적용할 수 있습니다\"),\". 인덱스 매핑에 애널라이저를 적용 할 때 보통은 이미 정의되어 제공되는 애널라이저 보다는 토크나이저, 토큰필터 등을 조합하여 만든 **사용자 정의 애널라이저(Custom Analyzer)**를 주로 사용합니다. 이미 정의된 애널라이저들은 매핑에 정의한 text 필드의 \",t().createElement(l.strong,null,\"analyzer\"),\" 항목에 이름을 명시하기만 하면 쉽게 적용이 가능합니다.\"),\"\\n\",t().createElement(l.p,null,\"이 책에서는 사용자 정의 애널라이저만 설명하겠으니 Elasticsearch에 사전에 만들어진 애널라이저들은 \",t().createElement(l.a,{href:\"https://www.elastic.co/\"},\"https://www.elastic.co/\"),\" 홈페이지의 공식 도큐먼트를 참고하시기 바랍니다. 매핑에 아무 설정을 하지 않는 경우 디폴트로 적용되는 애널라이저는 \",t().createElement(l.strong,null,\"standard\"),\" 애널라이저 입니다.\"),\"\\n\",t().createElement(l.p,null,\"사용자 정의 애널라이저는 인덱스 \",t().createElement(l.strong,null,\"settings\"),\" 의 \",t().createElement(l.code,{display:\"inline\"},'\"index\" : { \"analysis\" :'),\" 부분에 정의합니다. 생성한 다음에는 해당 인덱스에서 \",t().createElement(l.code,{display:\"inline\"},\"GET\"),\" 또는 \",t().createElement(l.code,{display:\"inline\"},\"POST \u003c인덱스명\u003e/_analyze\"),\" 명령으로 사용이 가능합니다. 다음은 \",t().createElement(l.strong,null,\"my_index3\"),\" 안에 \",t().createElement(l.code,{display:\"inline\"},\"whitespace\"),\" 토큰크나이저 그리고 \",t().createElement(l.code,{display:\"inline\"},\"lowercase\"),\", \",t().createElement(l.code,{display:\"inline\"},\"stop\"),\", \",t().createElement(l.code,{display:\"inline\"},\"snowball\"),\" 토큰필터를 사용하는 \",t().createElement(l.code,{display:\"inline\"},\"my_custom_analyzer\"),\" 라는 이름의 애널라이저를 추가하는 예제입니다.\"),\"\\n\",t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'PUT my_index3\\n{\\n  \"settings\": {\\n    \"index\": {\\n      \"analysis\": {\\n        \"analyzer\": {\\n          \"my_custom_analyzer\": {\\n            \"type\": \"custom\",\\n            \"tokenizer\": \"whitespace\",\\n            \"filter\": [\\n              \"lowercase\",\\n              \"stop\",\\n              \"snowball\"\\n            ]\\n          }\\n        }\\n      }\\n    }\\n  }\\n}\\n')),\"\\n\",t().createElement(l.p,null,\"이제 \",t().createElement(l.strong,null,\"my_index3\"),\" 에서 \",t().createElement(l.strong,null,\"my_custom_analyzer\"),\"를 사용할 수 있습니다.\"),\"\\n\",t().createElement(a,null,t().createElement(s,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'GET my_index3/_analyze\\n{\\n  \"analyzer\": \"my_custom_analyzer\",\\n  \"text\": [\\n    \"The quick brown fox jumps over the lazy dog\"\\n  ]\\n}\\n'))),t().createElement(s,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"tokens\" : [\\n    {\\n      \"token\" : \"quick\",\\n      \"start_offset\" : 4,\\n      \"end_offset\" : 9,\\n      \"type\" : \"word\",\\n      \"position\" : 1\\n    },\\n    {\\n      \"token\" : \"brown\",\\n      \"start_offset\" : 10,\\n      \"end_offset\" : 15,\\n      \"type\" : \"word\",\\n      \"position\" : 2\\n    },\\n    {\\n      \"token\" : \"fox\",\\n      \"start_offset\" : 16,\\n      \"end_offset\" : 19,\\n      \"type\" : \"word\",\\n      \"position\" : 3\\n    },\\n    {\\n      \"token\" : \"jump\",\\n      \"start_offset\" : 20,\\n      \"end_offset\" : 25,\\n      \"type\" : \"word\",\\n      \"position\" : 4\\n    },\\n    {\\n      \"token\" : \"over\",\\n      \"start_offset\" : 26,\\n      \"end_offset\" : 30,\\n      \"type\" : \"word\",\\n      \"position\" : 5\\n    },\\n    {\\n      \"token\" : \"lazi\",\\n      \"start_offset\" : 35,\\n      \"end_offset\" : 39,\\n      \"type\" : \"word\",\\n      \"position\" : 7\\n    },\\n    {\\n      \"token\" : \"dog\",\\n      \"start_offset\" : 40,\\n      \"end_offset\" : 43,\\n      \"type\" : \"word\",\\n      \"position\" : 8\\n    }\\n  ]\\n}\\n')))),\"\\n\",t().createElement(l.h3,{id:\"사용자-정의-토큰필터\"},\"사용자 정의 토큰필터\"),\"\\n\",t().createElement(l.p,null,\"토크나이저, 토큰필터의 경우에도 옵션을 지정하는 경우에는 사용자 정의 토크나이저, 토큰필터로 만들어 추가해야 합니다. 다음은 \",t().createElement(l.code,{display:\"inline\"},\"stop\"),' 토큰필터에 **\"brown\"**을 불용어로 적용한 ',t().createElement(l.strong,null,\"my_stop_filter\"),\" 사용자 정의 토큰필터를 생성하고 이것을 \",t().createElement(l.strong,null,\"my_custom_analyzer\"),\"에서 사용하도록 설정 한 예제입니다.\"),\"\\n\",t().createElement(r,{color:\"warning\"},t().createElement(l.p,null,\"아래 명령 실행 전에 기존 my_index3 인덱스는 먼저 삭제해야 합니다.\")),\"\\n\",t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'PUT my_index3\\n{\\n  \"settings\": {\\n    \"index\": {\\n      \"analysis\": {\\n        \"analyzer\": {\\n          \"my_custom_analyzer\": {\\n            \"type\": \"custom\",\\n            \"tokenizer\": \"whitespace\",\\n            \"filter\": [\\n              \"lowercase\",\\n              \"my_stop_filter\",\\n              \"snowball\"\\n            ]\\n          }\\n        },\\n        \"filter\": {\\n          \"my_stop_filter\": {\\n            \"type\": \"stop\",\\n            \"stopwords\": [\\n              \"brown\"\\n            ]\\n          }\\n        }\\n      }\\n    }\\n  }\\n}\\n')),\"\\n\",t().createElement(l.p,null,t().createElement(l.img,{src:\"/L1VzZXJzL2tpbWptaW4vZ2l0L2RvY3Mta3IvZXNndWlkZTc/assets/06-03_custom_analyzer.png\",alt:\"filter 에서 선언한 my_stop_filter 를 analyzer 에서 사용\"})),\"\\n\",t().createElement(l.p,null,\"이제 다시 \",t().createElement(l.strong,null,\"my_custom_analyzer\"),\"를 사용해서 텍스트를 분석 해 보면 \",t().createElement(l.strong,null,\"brown\"),\"이 불용어 처리가 되어 사라진 것을 확인할 수 있습니다.\"),\"\\n\",t().createElement(a,null,t().createElement(s,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'GET my_index3/_analyze\\n{\\n  \"analyzer\": \"my_custom_analyzer\",\\n  \"text\": [\\n    \"The quick brown fox jumps over the lazy dog\"\\n  ]\\n}\\n'))),t().createElement(s,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"tokens\" : [\\n    {\\n      \"token\" : \"the\",\\n      \"start_offset\" : 0,\\n      \"end_offset\" : 3,\\n      \"type\" : \"word\",\\n      \"position\" : 0\\n    },\\n    {\\n      \"token\" : \"quick\",\\n      \"start_offset\" : 4,\\n      \"end_offset\" : 9,\\n      \"type\" : \"word\",\\n      \"position\" : 1\\n    },\\n    {\\n      \"token\" : \"fox\",\\n      \"start_offset\" : 16,\\n      \"end_offset\" : 19,\\n      \"type\" : \"word\",\\n      \"position\" : 3\\n    },\\n    {\\n      \"token\" : \"jump\",\\n      \"start_offset\" : 20,\\n      \"end_offset\" : 25,\\n      \"type\" : \"word\",\\n      \"position\" : 4\\n    },\\n    {\\n      \"token\" : \"over\",\\n      \"start_offset\" : 26,\\n      \"end_offset\" : 30,\\n      \"type\" : \"word\",\\n      \"position\" : 5\\n    },\\n    {\\n      \"token\" : \"the\",\\n      \"start_offset\" : 31,\\n      \"end_offset\" : 34,\\n      \"type\" : \"word\",\\n      \"position\" : 6\\n    },\\n    {\\n      \"token\" : \"lazi\",\\n      \"start_offset\" : 35,\\n      \"end_offset\" : 39,\\n      \"type\" : \"word\",\\n      \"position\" : 7\\n    },\\n    {\\n      \"token\" : \"dog\",\\n      \"start_offset\" : 40,\\n      \"end_offset\" : 43,\\n      \"type\" : \"word\",\\n      \"position\" : 8\\n    }\\n  ]\\n}\\n')))),\"\\n\",t().createElement(l.h3,{id:\"매핑에-사용자-정의-애널라이저-적용\"},\"매핑에 사용자 정의 애널라이저 적용\"),\"\\n\",t().createElement(l.p,null,\"애널라이저를 실제 인덱스에 입력할 데이터에 적용하려면 \",t().createElement(l.strong,null,\"settings\"),\" 부분에서 만든 애널라이저를 \",t().createElement(l.strong,null,\"mappings\"),\" 의 text 필드별로 지정합니다. 앞에서 만든 \",t().createElement(l.strong,null,\"my_custom_analyzer\"),\" 를 \",t().createElement(l.strong,null,\"message\"),\" 필드에 적용하는 방법은 다음과 같습니다. \",t().createElement(l.strong,null,\"setting\"),\" 부분은 위 예제와 동일합니다.\"),\"\\n\",t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'PUT my_index3\\n{\\n  \"settings\": {\\n    \"index\": {\\n      \"analysis\": {\\n        \"analyzer\": {\\n          \"my_custom_analyzer\": {\\n            \"type\": \"custom\",\\n            \"tokenizer\": \"whitespace\",\\n            \"filter\": [\\n              \"lowercase\",\\n              \"my_stop_filter\",\\n              \"snowball\"\\n            ]\\n          }\\n        },\\n        \"filter\": {\\n          \"my_stop_filter\": {\\n            \"type\": \"stop\",\\n            \"stopwords\": [\\n              \"brown\"\\n            ]\\n          }\\n        }\\n      }\\n    }\\n  },\\n  \"mappings\": {\\n    \"properties\": {\\n      \"message\": {\\n        \"type\": \"text\",\\n        \"analyzer\": \"my_custom_analyzer\"\\n      }\\n    }\\n  }\\n}\\n')),\"\\n\",t().createElement(l.p,null,\"이제 \",t().createElement(l.strong,null,\"my_index\"),\" 에 \",t().createElement(l.strong,null,\"message\"),\" 필드에 입력되는 값은 위에 지정된 \",t().createElement(l.strong,null,\"my_custom_analyzer\"),\" 애널라이저가 적용됩니다. my_index의 message 필드에 값을 입력하고 검색 해 보면 \",t().createElement(l.strong,null,\"brown\"),\"은 불용어 처리가 되어 검색되지 않는 것을 확인할 수 있습니다.\"),\"\\n\",t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'PUT my_index3/_doc/1\\n{\\n  \"message\": \"The quick brown fox jumps over the lazy dog\"\\n}\\n')),\"\\n\",t().createElement(a,null,t().createElement(s,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'GET my_index3/_search\\n{\\n  \"query\": {\\n    \"match\": {\\n      \"message\": \"brown\"\\n    }\\n  }\\n}\\n'))),t().createElement(s,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"took\" : 468,\\n  \"timed_out\" : false,\\n  \"_shards\" : {\\n    \"total\" : 1,\\n    \"successful\" : 1,\\n    \"skipped\" : 0,\\n    \"failed\" : 0\\n  },\\n  \"hits\" : {\\n    \"total\" : {\\n      \"value\" : 0,\\n      \"relation\" : \"eq\"\\n    },\\n    \"max_score\" : null,\\n    \"hits\" : [ ]\\n  }\\n}\\n')))),\"\\n\",t().createElement(l.h2,{id:\"634-텀-벡터---_termvectors-api\"},\"6.3.4 텀 벡터 - _termvectors API\"),\"\\n\",t().createElement(l.p,null,\"색인된 도큐먼트의 역 인덱스의 내용을 확인할 때는 도큐먼트 별로 \",t().createElement(l.strong,null,\"_termvectors\"),\" API를이용해서 확인이 가능합니다. \",t().createElement(l.code,{display:\"inline\"},\"GET \u003c인덱스\u003e/_termvectors/\u003c도큐먼트id\u003e?fields=\u003c필드명\u003e\"),\" 형식으로 사용하며 \",t().createElement(l.strong,null,\"6.x\"),\" 이전 버전에서는 \",t().createElement(l.code,{display:\"inline\"},\"GET \u003c인덱스\u003e/\u003c도큐먼트 타입\u003e/\u003c도큐먼트id\u003e/_termvectors?fields=\u003c필드명\u003e\"),\" 형식으로 사용합니다.\"),\"\\n\",t().createElement(l.p,null,\"다음은 앞에서 입력한 \",t().createElement(l.strong,null,\"my_index3/_doc/1\"),\" 도큐먼트의 \",t().createElement(l.strong,null,\"message\"),\" 필드를 확인하는 예제입니다.\"),\"\\n\",t().createElement(a,null,t().createElement(s,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},\"GET my_index3/_termvectors/1?fields=message\\n\"))),t().createElement(s,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"_index\" : \"my_index3\",\\n  \"_type\" : \"_doc\",\\n  \"_id\" : \"1\",\\n  \"_version\" : 1,\\n  \"found\" : true,\\n  \"took\" : 1,\\n  \"term_vectors\" : {\\n    \"message\" : {\\n      \"field_statistics\" : {\\n        \"sum_doc_freq\" : 7,\\n        \"doc_count\" : 1,\\n        \"sum_ttf\" : 8\\n      },\\n      \"terms\" : {\\n        \"dog\" : {\\n          \"term_freq\" : 1,\\n          \"tokens\" : [\\n            {\\n              \"position\" : 8,\\n              \"start_offset\" : 40,\\n              \"end_offset\" : 43\\n            }\\n          ]\\n        },\\n        \"fox\" : {\\n          \"term_freq\" : 1,\\n          \"tokens\" : [\\n            {\\n              \"position\" : 3,\\n              \"start_offset\" : 16,\\n              \"end_offset\" : 19\\n            }\\n          ]\\n        },\\n        \"jump\" : {\\n          \"term_freq\" : 1,\\n          \"tokens\" : [\\n            {\\n              \"position\" : 4,\\n              \"start_offset\" : 20,\\n              \"end_offset\" : 25\\n            }\\n          ]\\n        },\\n        \"lazi\" : {\\n          \"term_freq\" : 1,\\n          \"tokens\" : [\\n            {\\n              \"position\" : 7,\\n              \"start_offset\" : 35,\\n              \"end_offset\" : 39\\n            }\\n          ]\\n        },\\n        \"over\" : {\\n          \"term_freq\" : 1,\\n          \"tokens\" : [\\n            {\\n              \"position\" : 5,\\n              \"start_offset\" : 26,\\n              \"end_offset\" : 30\\n            }\\n          ]\\n        },\\n        \"quick\" : {\\n          \"term_freq\" : 1,\\n          \"tokens\" : [\\n            {\\n              \"position\" : 1,\\n              \"start_offset\" : 4,\\n              \"end_offset\" : 9\\n            }\\n          ]\\n        },\\n        \"the\" : {\\n          \"term_freq\" : 2,\\n          \"tokens\" : [\\n            {\\n              \"position\" : 0,\\n              \"start_offset\" : 0,\\n              \"end_offset\" : 3\\n            },\\n            {\\n              \"position\" : 6,\\n              \"start_offset\" : 31,\\n              \"end_offset\" : 34\\n            }\\n          ]\\n        }\\n      }\\n    }\\n  }\\n}\\n')))),\"\\n\",t().createElement(l.p,null,\"여러개의 필드를 같이 확인하고 싶을 때는 \",t().createElement(l.code,{display:\"inline\"},\"?fields=field1,field2\"),\" 처럼 쉼표로 나열해서 볼 수 있습니다.\"))}};function o(e,n){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+e+\"` to be defined: you likely forgot to import, pass, or provide it.\")}})(),s})()));","frontmatter":{"id":"esG7-06-03-analyzer","slug":"/krEsguide7/esG7-06-03-analyzer","title":"6.3 애널라이저 - Analyzer","description":"모든 문서에 대한 저작권은 Elastic 과 김종민(kimjmin@gmail.com) 에게 있으며 허가되지 않은 무단 복제나 배포 및 출판을 금지합니다. 본 문서의 내용 및 포함된 자료를 인용하고자 하는 경우 출처를 명시하고 게재된 주소를 김종민(kimjmin@gmail.com)에게 알려주시기 바랍니다.","date":"2022-01-25T00:00:00.000Z","tags":["indexing","text","analysis","analyzer"],"link":"file:///Users/kimjmin/git/docs-kr/esguide7","linkPath":"06-text-analysis/06-03-analyzer.mdx"},"missionId":"krEsguide7"},"__N_SSG":true},"page":"/[...slug]","query":{"slug":["krEsguide7","esG7-06-03-analyzer"]},"buildId":"K8YMqTQBQVe0pMujUHgY0","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>