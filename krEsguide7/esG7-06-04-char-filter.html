<!DOCTYPE html><html lang="en"><head><meta name="eui-styles"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-24"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'UA-12395217-24', {
                page_path: window.location.pathname,
              });
          </script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script>!function(){try{var d=document.documentElement;var e=localStorage.getItem("elastic-docs-theme");if(e){d.setAttribute('data-theme', e)}else{d.setAttribute('data-theme', 'light');}}catch(t){}}();</script><title>6.4 캐릭터 필터 - Character Filter | Elastic Documentation</title><meta property="og:title" content="6.4 캐릭터 필터 - Character Filter | Elastic Documentation"/><meta class="elastic" name="title" content="6.4 캐릭터 필터 - Character Filter"/><meta class="elastic" name="date" content="2022-01-25T00:00:00.000Z"/><meta name="description" content="모든 문서에 대한 저작권은 Elastic 과 김종민(kimjmin@gmail.com) 에게 있으며 허가되지 않은 무단 복제나 배포 및 출판을 금지합니다. 본 문서의 내용 및 포함된 자료를 인용하고자 하는 경우 출처를 명시하고 게재된 주소를 김종민(kimjmin@gmail.com)에게 알려주시기 바랍니다."/><meta property="og:description" content="모든 문서에 대한 저작권은 Elastic 과 김종민(kimjmin@gmail.com) 에게 있으며 허가되지 않은 무단 복제나 배포 및 출판을 금지합니다. 본 문서의 내용 및 포함된 자료를 인용하고자 하는 경우 출처를 명시하고 게재된 주소를 김종민(kimjmin@gmail.com)에게 알려주시기 바랍니다."/><meta name="twitter:site" content="@elastic"/><meta property="og:url" content="http://localhost:3000/krEsguide7/esG7-06-04-char-filter"/><link rel="stylesheet" type="text/css" href="/themes/eui_theme_undefined.min.css"/><link rel="stylesheet" type="text/css" href="/themes/theme_undefined.css"/><link rel="shortcut icon" href="/assets/images/favicon.ico"/><meta name="next-head-count" content="14"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-5b19eee634f155d9037d.js" defer=""></script><script src="/_next/static/chunks/framework-bf9b12c23e794b196495.js" defer=""></script><script src="/_next/static/chunks/main-710a14204f294c81ed08.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d9a28ac2b5165b299106.js" defer=""></script><script src="/_next/static/chunks/c78d26b1-ff6470003369f2a26fc7.js" defer=""></script><script src="/_next/static/chunks/103-fd3e1552f32e8c4a6b92.js" defer=""></script><script src="/_next/static/chunks/3674-41861bc71d856d154d9e.js" defer=""></script><script src="/_next/static/chunks/7815-952dc762df3d4a43befe.js" defer=""></script><script src="/_next/static/chunks/9237-e960f47bcd4625ef5949.js" defer=""></script><script src="/_next/static/chunks/4620-e195c3f5ae7ecefc57c7.js" defer=""></script><script src="/_next/static/chunks/8482-a7f4dd7850e2aa9b7794.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...slug%5D-ac753ff46f79468d535c.js" defer=""></script><script src="/_next/static/AzE3g5BBfFWf9aUdpqGZ7/_buildManifest.js" defer=""></script><script src="/_next/static/AzE3g5BBfFWf9aUdpqGZ7/_ssgManifest.js" defer=""></script></head><body class="guideBody"><div id="__next"><div class="docWrapper"><header data-elastic-exclude="true"><div class="euiHeader euiHeader--dark euiHeader--fixed"><div class="euiHeaderSection euiHeaderSection--dontGrow euiHeaderSection--left"><div class="euiHeaderSectionItem"><a rel="noreferrer" class="euiHeaderLogo"><svg data-type="logoElastic" xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" viewBox="0 0 32 32" class="euiIcon euiIcon--large euiHeaderLogo__icon" focusable="false" role="img" aria-label="Elastic"><path class="outline" fill-rule="evenodd" clip-rule="evenodd" d="M30.86 13.129A6.333 6.333 0 0132 16.77a6.419 6.419 0 01-1.162 3.652 6.382 6.382 0 01-3.032 2.331 4.833 4.833 0 01-1.672 5.542 4.789 4.789 0 01-5.77-.074 9.016 9.016 0 01-4.5 3.322 8.982 8.982 0 01-5.587.023 9.014 9.014 0 01-4.526-3.287 9.067 9.067 0 01-1.727-5.333c0-.579.053-1.156.16-1.725A6.305 6.305 0 011.145 18.9 6.341 6.341 0 010 15.242a6.42 6.42 0 011.163-3.652 6.384 6.384 0 013.035-2.33 4.833 4.833 0 011.658-5.557 4.789 4.789 0 015.78.07 9.037 9.037 0 014.93-3.446 9.007 9.007 0 015.994.419 9.05 9.05 0 014.407 4.098 9.097 9.097 0 01.873 5.965 6.298 6.298 0 013.02 2.32zm-18.28.658l7.002 3.211 7.066-6.213a7.85 7.85 0 00.152-1.557c0-1.692-.539-3.34-1.54-4.704a7.897 7.897 0 00-4.02-2.869 7.87 7.87 0 00-4.932.086 7.9 7.9 0 00-3.92 3.007l-1.174 6.118 1.367 2.92-.001.001zm-7.247 7.441A7.964 7.964 0 006.72 27.53a7.918 7.918 0 004.04 2.874 7.89 7.89 0 004.95-.097 7.92 7.92 0 003.926-3.03l1.166-6.102-1.555-2.985-7.03-3.211-6.885 6.248.001.001zm4.755-11.024l-4.8-1.137.002-.002a3.82 3.82 0 011.312-4.358 3.785 3.785 0 014.538.023l-1.052 5.474zm-5.216.01a5.294 5.294 0 00-2.595 1.882 5.324 5.324 0 00-.142 6.124 5.287 5.287 0 002.505 2l6.733-6.101-1.235-2.65-5.266-1.255zm18.286 17.848a3.737 3.737 0 01-2.285-.785l1.037-5.454 4.8 1.125a3.812 3.812 0 01-1.801 4.68c-.54.283-1.14.432-1.751.434zm-1.31-7.499l5.28 1.238a5.34 5.34 0 002.622-1.938 5.37 5.37 0 001.013-3.106 5.311 5.311 0 00-.936-3.01 5.282 5.282 0 00-2.475-1.944l-6.904 6.07 1.4 2.69z" fill="#fff"></path><path d="M12.58 13.787l7.002 3.211 7.066-6.213a7.849 7.849 0 00.152-1.557c0-1.692-.539-3.34-1.54-4.704a7.897 7.897 0 00-4.02-2.869 7.87 7.87 0 00-4.932.086 7.9 7.9 0 00-3.92 3.007l-1.174 6.118 1.367 2.92-.001.001z" fill="#FEC514"></path><path d="M5.333 21.228A7.964 7.964 0 006.72 27.53a7.918 7.918 0 004.04 2.874 7.89 7.89 0 004.95-.097 7.92 7.92 0 003.926-3.03l1.166-6.102-1.555-2.985-7.03-3.211-6.885 6.248.001.001z" fill="#00BFB3"></path><path d="M5.288 9.067l4.8 1.137L11.14 4.73a3.785 3.785 0 00-5.914 1.94 3.82 3.82 0 00.064 2.395" fill="#F04E98"></path><path d="M4.872 10.214a5.294 5.294 0 00-2.595 1.882 5.324 5.324 0 00-.142 6.124 5.287 5.287 0 002.505 2l6.733-6.101-1.235-2.65-5.266-1.255z" fill="#1BA9F5"></path><path d="M20.873 27.277a3.736 3.736 0 002.285.785 3.783 3.783 0 003.101-1.63 3.812 3.812 0 00.451-3.484l-4.8-1.125-1.037 5.454z" fill="#93C90E"></path><path d="M21.848 20.563l5.28 1.238a5.34 5.34 0 002.622-1.938 5.37 5.37 0 001.013-3.106 5.312 5.312 0 00-.936-3.01 5.283 5.283 0 00-2.475-1.944l-6.904 6.07 1.4 2.69z" fill="#07C"></path></svg><span class="euiHeaderLogo__text"><svg class="elasticMark" width="64" height="19" fill="white" xmlns="http://www.w3.org/2000/svg" aria-labelledby="elasticMark"><title id="elasticMark">Elastic</title><path d="M9.74 16.882l.711-.076.046 1.455c-1.879.257-3.485.393-4.818.393-1.773 0-3.03-.515-3.773-1.545C1.164 16.08.8 14.473.8 12.306c0-4.333 1.727-6.5 5.167-6.5 1.666 0 2.909.47 3.727 1.394.818.924 1.227 2.394 1.227 4.379l-.106 1.409H2.664c0 1.364.242 2.379.742 3.03.5.652 1.349.985 2.576.985 1.242.03 2.485-.015 3.757-.121zm-.667-5.349c0-1.515-.243-2.59-.728-3.212-.484-.621-1.272-.94-2.363-.94s-1.924.334-2.47.986c-.545.651-.833 1.712-.848 3.166h6.409zM13.497 18.427V.7h1.848v17.727h-1.848zM27.027 9.806v6.076c0 .621 1.53.742 1.53.742l-.09 1.637c-1.303 0-2.38.106-3.03-.515a10.861 10.861 0 01-4.44.924c-1.136 0-2-.319-2.59-.97-.592-.636-.895-1.56-.895-2.773 0-1.197.303-2.09.91-2.651.605-.56 1.56-.925 2.863-1.046l3.879-.363v-1.06c0-.834-.182-1.44-.546-1.804-.363-.364-.863-.545-1.485-.545H18.27V5.82h4.742c1.394 0 2.41.318 3.046.97.651.636.97 1.651.97 3.015zm-7.606 5.03c0 1.516.621 2.273 1.879 2.273a9.89 9.89 0 003.303-.56l.56-.197v-4.076l-3.65.348c-.743.06-1.274.273-1.607.637-.333.363-.485.894-.485 1.575zM34.255 7.473c-1.788 0-2.697.62-2.697 1.879 0 .575.212.984.62 1.227.41.242 1.35.485 2.819.742 1.47.258 2.5.606 3.106 1.076.606.454.91 1.318.91 2.59 0 1.274-.41 2.198-1.228 2.789-.818.59-2 .894-3.576.894-1.015 0-4.424-.38-4.424-.38l.106-1.605c1.954.182 3.379.333 4.333.333.955 0 1.682-.151 2.182-.454.5-.303.758-.819.758-1.53 0-.713-.212-1.198-.637-1.455-.424-.258-1.363-.5-2.818-.728-1.455-.227-2.485-.56-3.09-1.015-.607-.439-.91-1.272-.91-2.47 0-1.196.424-2.09 1.273-2.666.848-.576 1.909-.864 3.166-.864 1 0 4.485.258 4.485.258v1.621c-1.833-.106-3.333-.242-4.379-.242zM47.952 7.685h-3.925v5.909c0 1.409.106 2.348.303 2.788.212.44.697.666 1.47.666l2.197-.151.121 1.53c-1.106.182-1.94.273-2.515.273-1.288 0-2.167-.318-2.667-.94-.5-.62-.742-1.818-.742-3.575v-6.5h-1.758V6.079h1.758V2.29h1.833v3.773h3.925v1.62zM50.527 3.276V1.139h1.849v2.152l-1.849-.015zm0 15.151V6.08h1.849v12.348h-1.849zM60.406 5.821c.546 0 1.47.106 2.773.303l.59.076-.075 1.5c-1.318-.152-2.288-.227-2.91-.227-1.393 0-2.348.333-2.848 1-.5.666-.757 1.909-.757 3.712 0 1.803.227 3.06.697 3.773.47.712 1.44 1.06 2.924 1.06l2.91-.227.075 1.53c-1.53.227-2.682.349-3.44.349-1.924 0-3.257-.5-3.984-1.485-.728-.985-1.106-2.652-1.106-5 0-2.349.393-4 1.181-4.94.803-.939 2.122-1.424 3.97-1.424z"></path></svg></span></a></div></div><div class="euiHeaderSection euiHeaderSection--dontGrow euiHeaderSection--left"><div class="euiHeaderSectionItem"><nav class="euiHeaderLinks" aria-label="App menu"><div class="euiHeaderLinks__list euiHeaderLinks__list--gutterS"><a class="euiButton euiButton--primary euiButton--small euiButton--fill" href="https://cloud.elastic.co/registration?source=docsHeader" rel=""><span class="euiButtonContent euiButton__content"><span class="euiButton__text">Try Free</span></span></a></div></nav></div></div></div></header><div class="euiPage euiPage--grow docArticle__template"><div class="euiPageSideBar euiPageSideBar--paddingLarge euiPageSideBar--sticky docChrome__sidebar"><div class="euiFlexItem" data-elastic-exclude="true"><div class="euiContextMenu docChrome__contextMenu"><div class="euiContextMenuPanel euiContextMenu__panel" tabindex="-1"><button class="euiContextMenuPanelTitle" type="button" data-test-subj="contextMenuPanelTitleButton"><span class="euiContextMenu__itemLayout"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="euiIcon euiIcon--medium euiContextMenu__icon" focusable="false" role="img" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.018 14.043a.75.75 0 00.024-1.06l-4.59-4.81a.25.25 0 010-.346l4.59-4.81a.75.75 0 10-1.085-1.035l-4.59 4.81a1.75 1.75 0 000 2.416l4.59 4.81c.286.3.761.31 1.06.024z"></path></svg><span class="euiContextMenu__text">Elastic 가이드북 (7.x)</span></span></button><div><div class="euiSpacer euiSpacer--s css-i2qclb-euiSpacer-s"></div><nav class="euiSideNav" aria-label="Elastic 가이드북 (7.x)"><div id="euiSideNav_b97efd50-eaaa-11ec-944f-2bd1d637092c_content" class="euiSideNav__content euiSideNav__contentMobile-xs euiSideNav__contentMobile-s"><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1. 서문</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-01-overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1. 서문</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-01-01-elastic-stack" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1.1 Elastic Stack 소개</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-01-01-01-elasticsearch" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1.1.1 Elasticsearch</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-01-01-02-logstash" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1.1.2 Logstash</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-01-01-03-kibana" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1.1.3 Kibana</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-01-01-04-beats" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">1.1.4 Beats</span></span></a></div></div></div><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2. Elasticsearch 시작하기</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2. Elasticsearch 시작하기</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-01-data-indexing" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.1 데이터 색인</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-02-install-run" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.2 설치 및 실행</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-02-01-download" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.2.1 다운로드 설치 및 실행</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-02-02-unix-rpm" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.2.2 Unix RPM 설치 및 실행</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-03-es-config" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.3 Elasticsearch 환경 설정</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-03-01-jvm" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.3.1 jvm.options</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-03-02-es-yml" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.3.2 elasticsearch.yml</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-03-03-node-config" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.3.3 노드의 역할 : master, data, insgest</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-02-03-04-cmd" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">2.3.4 커맨드 라인 설정</span></span></a></div></div></div><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">3. Elasticsearch 시스템 구조</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-03-overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">3. Elasticsearch 시스템 구조</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-03-01-cluster" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">3.1 클러스터 구성</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-03-02-index-shard" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">3.2 인덱스와 샤드 - Index &amp; Shards</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-03-03-master-data-nodes" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">3.3 마스터 노드와 데이터 노드 - Master &amp; Data Nodes</span></span></a></div></div></div><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4. Elasticsearch 데이터 처리</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-04-overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4. Elasticsearch 데이터 처리</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-04-01-rest-api" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4.1 REST API</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-04-02-crud" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4.2 CRUD - 입력,조회,수정,삭제</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-04-03-bulk-api" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4.3 벌크 - _bulk API</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-04-04-search-api" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">4.4 검색 - _search API</span></span></a></div></div></div><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5. 검색과 쿼리 - Query DSL</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5. 검색과 쿼리 - Query DSL</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-01-fulltext" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5.1 풀텍스트 쿼리 - Full Text Query</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-02-bool" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5.2 복합 쿼리 - Bool Query</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-03-relevancy" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5.3 정확도 - Relevancy</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-04-bool-should" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5.4 bool : sould</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-05-exact-value" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5.5 정확값 쿼리 - Exact Value Query</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-05-06-range" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">5.6 범위 쿼리 - Range Query</span></span></a></div></div></div><div class="euiSideNavItem euiSideNavItem--root euiSideNavItem--hasChildItems"><div class="euiSideNavItemButton"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6. 데이터 색인과 텍스트 분석</span></span></div><div class="euiSideNavItem__items"><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-overview" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6. 데이터 색인과 텍스트 분석</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-01-inverted-index" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.1 역 인덱스 - Inverted Index</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-02-text-analysis" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.2 텍스트 분석 - Text Analysis</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-03-analyzer" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.3 애널라이저 - Analyzer</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable euiSideNavItemButton-isSelected" href="/krEsguide7/esG7-06-04-char-filter" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.4 캐릭터 필터 - Character Filter</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-05-tokenizer" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.5 토크나이저 - Tokenizer</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-06-token-filter" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.6 토큰 필터 - Token Filter</span></span></a></div><div class="euiSideNavItem euiSideNavItem--trunk"><a class="euiSideNavItemButton euiSideNavItemButton--isClickable" href="/krEsguide7/esG7-06-07-stemming" rel="noreferrer"><span class="euiSideNavItemButton__content"><span class="euiSideNavItemButton__label euiSideNavItemButton__label--truncated">6.7 형태소 분석 - Stemming</span></span></a></div></div></div></div></nav></div></div></div></div></div><div class="euiPanel euiPanel--paddingLarge euiPanel--borderRadiusNone euiPanel--plain euiPanel--hasShadow euiPageBody euiPageBody--borderRadiusNone euiPageBody--paddingLarge"><div class="euiFlexGroup euiFlexGroup--gutterExtraLarge euiFlexGroup--directionRow euiFlexGroup--responsive docArticle__wrap"><div class="euiFlexItem docArticle__article"><header class="euiPageHeader euiPageHeader--bottomBorder euiPageHeader--responsive euiPageHeader--center"><div class="euiPageHeaderContent"><div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--alignItemsFlexStart euiFlexGroup--directionRow euiFlexGroup--responsive euiPageHeaderContent__top"><div class="euiFlexItem"><h1 class="euiTitle euiTitle--large">6.4 캐릭터 필터 - Character Filter</h1><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div class="euiText euiText--medium euiText--constrainedWidth"><p><span class="euiTextColor euiTextColor--subdued">모든 문서에 대한 저작권은 Elastic 과 김종민(kimjmin@gmail.com) 에게 있으며 허가되지 않은 무단 복제나 배포 및 출판을 금지합니다. 본 문서의 내용 및 포함된 자료를 인용하고자 하는 경우 출처를 명시하고 게재된 주소를 김종민(kimjmin@gmail.com)에게 알려주시기 바랍니다.</span></p></div></div></div></div></header><div class="euiSpacer euiSpacer--xl css-kiiy9t-euiSpacer-xl"></div><div class="euiPanel euiPanel--borderRadiusMedium euiPanel--plain euiPanel--noShadow euiPageContent" role="main"><div class="euiPageContentBody"><div class="euiText euiText--medium"><p>캐릭터 필터는 텍스트 분석 중 가장 먼저 처리되는 과정으로 색인된 텍스트가 토크나이저에 의해 텀으로 분리되기 전에 전체 문장에 대해 적용되는 일종의 전처리 도구입니다. 이 책에서 설명하는 7.0 버전 기준으로 캐릭터 필터는 <strong>HTML Strip</strong>, <strong>Mapping</strong>, <strong>Pattern Replace</strong> 총 3개가 존재합니다. <code class="euiCode" data-code-language="text">char_filter</code> 항목에 배열로 입력하며 하나만 적용하거나 차례대로 입력해서 3개를 모두 적용할 수도 있습니다.</p>
<h2 id="641-html-strip" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#641-html-strip" rel="noreferrer" aria-label="6.4.1 HTML Strip permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium" focusable="false" role="img" aria-hidden="true"><path d="M7.66 3.803a.5.5 0 11-.706-.707L9.268.78c1.187-1.187 3.242-1 4.596.354s1.54 3.409.354 4.596l-3.536 3.536c-1.187 1.187-3.242 1-4.596-.354a.5.5 0 11.707-.707c.99.99 2.417 1.119 3.182.354l3.536-3.536c.765-.765.635-2.193-.354-3.182-.99-.99-2.417-1.119-3.182-.354L7.661 3.803zm-.32 7.392a.5.5 0 11.707.707l-2.315 2.314c-1.187 1.188-3.242 1-4.596-.353-1.354-1.354-1.54-3.41-.353-4.596L4.318 5.73c1.187-1.187 3.242-1 4.596.354a.5.5 0 01-.707.707c-.989-.99-2.416-1.12-3.182-.354L1.49 9.974c-.766.765-.636 2.193.353 3.182.99.989 2.417 1.119 3.182.353l2.315-2.314z"></path></svg></a>6.4.1 HTML Strip</h2>
<p>입력된 텍스트가 HTML 인 경우 HTML 태그들을 제거하여 일반 텍스트로 만듭니다. <code class="euiCode" data-code-language="text">&lt;&gt;</code>로 된 태그를 제거할 뿐 아니라 <code class="euiCode" data-code-language="text">&amp;nbsp;</code> 같은 HTML 문법 용어들도 해석합니다. 입력 값은 <code class="euiCode" data-code-language="text">html_strip</code> 입니다.</p>
<p>다음은 HTML Strip 캐릭터 필터를 이용해서 <code class="euiCode" data-code-language="text">&lt;p&gt;I&amp;apos;m so &lt;b&gt;happy&lt;/b&gt;!&lt;/p&gt;</code> 문장을 처리 한 결과입니다.</p>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">POST</span> _analyze
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;html_strip&quot;</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;p&gt;I&amp;apos;m so &lt;b&gt;happy&lt;/b&gt;!&lt;/p&gt;&quot;</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>모든 태그들이 제거되고 해석되어 <strong>&quot;I&#x27;m so happy!&quot;</strong> 라는 문장으로 변경 된 것을 확인할 수 있습니다.</p>
<div class="euiCallOut euiCallOut--warning docCallOut"><div class="euiText euiText--small"><div class="euiTextColor euiTextColor--default"><p>애널라이저는 항상 최소 1개의 토크나이저를 필요로 하기 때문에 캐릭터 필터만 적용하면 오류가 발생합니다. 위 예제에서는 <strong>keyword</strong> 토크나이저를 같이 사용했습니다.</p></div></div></div>
<h2 id="642-mapping" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#642-mapping" rel="noreferrer" aria-label="6.4.2 Mapping permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium" focusable="false" role="img" aria-hidden="true"><path d="M7.66 3.803a.5.5 0 11-.706-.707L9.268.78c1.187-1.187 3.242-1 4.596.354s1.54 3.409.354 4.596l-3.536 3.536c-1.187 1.187-3.242 1-4.596-.354a.5.5 0 11.707-.707c.99.99 2.417 1.119 3.182.354l3.536-3.536c.765-.765.635-2.193-.354-3.182-.99-.99-2.417-1.119-3.182-.354L7.661 3.803zm-.32 7.392a.5.5 0 11.707.707l-2.315 2.314c-1.187 1.188-3.242 1-4.596-.353-1.354-1.354-1.54-3.41-.353-4.596L4.318 5.73c1.187-1.187 3.242-1 4.596.354a.5.5 0 01-.707.707c-.989-.99-2.416-1.12-3.182-.354L1.49 9.974c-.766.765-.636 2.193.353 3.182.99.989 2.417 1.119 3.182.353l2.315-2.314z"></path></svg></a>6.4.2 Mapping</h2>
<p>Mapping 캐릭터 필터를 이용하면 지정한 단어를 다른 단어로 치환이 가능합니다. 특수문자 등을 포함하는 검색 기능을 구현하려는 경우 반드시 적용해야 해서 실제로 캐릭터 필터 중에는 가장 많이 쓰입니다. 다음 예제를 위해 <strong>language</strong> 필드에 값이 <strong>Java</strong>, <strong>C</strong>, <strong>C++</strong> 인 도큐먼트들이 있는 <strong>coding</strong> 인덱스를 생성 해 보겠습니다.</p>
<div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">POST</span> coding<span class="token operator">/</span>_bulk
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span><span class="token string">&quot;language&quot;</span><span class="token operator">:</span><span class="token string">&quot;Java&quot;</span><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span><span class="token string">&quot;language&quot;</span><span class="token operator">:</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span><span class="token string">&quot;language&quot;</span><span class="token operator">:</span><span class="token string">&quot;C++&quot;</span><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>이제 coding 인덱스에서 match 쿼리로 <strong>C++</strong> 을 검색 해 보겠습니다.</p>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> coding<span class="token operator">/</span>_search
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;language&quot;</span><span class="token operator">:</span> <span class="token string">&quot;C++&quot;</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>**C++**을 검색했는데 값이 <strong>C</strong>, <strong>C++</strong> 인 두개의 도큐먼트가 결과로 나타났습니다. 검색어를 <strong>C</strong> 또는 <strong>c</strong>로 검색을 해 보아도 동일한 결과가 나타납니다. 도큐먼트가 색인 될 때 <strong>standard</strong> 애널라이저가 적용되면서 **C++**에서 특수문자 **+**는 제거 되고 <strong>C</strong>는 소문자로 처리 되면서 실제로 역 인덱는 <strong>c</strong> 가 저장됩니.</p>
<p><figure class="euiImage euiImage--hasShadow euiImage--allowFullScreen euiImage--original"><button type="button" aria-label="Open fullscreen language 필드의 역 인덱스 image" class="euiImage__button" data-test-subj="activateFullScreenButton"><img src="/ZWxhc3RpYy9kb2NzLWtyL2VzZ3VpZGU3/assets/06-04_java_c.png" alt="language 필드의 역 인덱스" class="euiImage__img" title="language 필드의 역 인덱스"/><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium euiIcon--ghost euiIcon-isLoading euiImage__icon" focusable="false" role="img" aria-hidden="true"></svg></button></figure></p>
<p>Match 쿼리로 검색했을 때 검색어 <strong>C++</strong> 도 마찬가지로 standard 애널라이저가 적용되어 <strong>c</strong> 로 검색을 수행하여 <code class="euiCode" data-code-language="text">&quot;_id&quot; : &quot;1&quot;</code>, <code class="euiCode" data-code-language="text">&quot;_id&quot; : &quot;2&quot;</code> 인 도큐먼트들이 결과로 나타나게 됩니다. standard 뿐 아니라 대다수의 애널라이저들이 특수문자에 대해서는 불용어로 간주하고 제거 해 버리기 때문에 특수문자가 포함된 검색어들을 검색하려면 먼저 특수문자를 다른 문자로 치환해서 저장해야 합니다.</p>
<p><strong>C++</strong> 텀을 <strong>cpp</strong> 처럼 치환하는 방법도 있는데, 이 경우라면 검색될 가능성이 있는 특수문자를 포함하는 모든 텀을 치환 해 주어야 하기 때문에 다소 번거롭습니다. 여기서는 특수문자 <code class="euiCode" data-code-language="text">+</code> 를 <code class="euiCode" data-code-language="text">_plus_</code> 라는 단어로 치환해서 색인을 해 보도록 하겠습니다. coding 인덱스를 삭제하고 <code class="euiCode" data-code-language="text">mapping</code> 캐릭터 필터를 이용해서 인덱스의 매핑을 새로 지정 한 뒤 앞의 _bulk 명령으로 입력했던 도큐먼트들을 다시 색인 해 보도록 합니다.</p>
<div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">PUT</span> coding
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;analysis&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;coding_analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;cpp_char_filter&quot;</span>
</span><span class="euiCodeBlock__line">          <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;whitespace&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;stop&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;snowball&quot;</span> <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line">        <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;cpp_char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mapping&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;+ =&gt; _plus_&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;- =&gt; _minus_&quot;</span> <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line">        <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">      <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;language&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;coding_analyzer&quot;</span>
</span><span class="euiCodeBlock__line">      <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p><figure class="euiImage euiImage--hasShadow euiImage--allowFullScreen euiImage--original"><button type="button" aria-label="Open fullscreen 사용자 정의 캐릭터 필터, 애널라이저 설정 후 language 필드에 적용 image" class="euiImage__button" data-test-subj="activateFullScreenButton"><img src="/ZWxhc3RpYy9kb2NzLWtyL2VzZ3VpZGU3/assets/06-04_custom_char_filter.png" alt="사용자 정의 캐릭터 필터, 애널라이저 설정 후 language 필드에 적용" class="euiImage__img" title="사용자 정의 캐릭터 필터, 애널라이저 설정 후 language 필드에 적용"/><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium euiIcon--ghost euiIcon-isLoading euiImage__icon" focusable="false" role="img" aria-hidden="true"></svg></button></figure></p>
<p><code class="euiCode" data-code-language="text">+</code> 기호는 <code class="euiCode" data-code-language="text">_plus_</code> 로, <code class="euiCode" data-code-language="text">-</code> 기호는 <code class="euiCode" data-code-language="text">_minus_</code> 로 치환하는 <strong>cpp_char_filter</strong> 라는 캐릭터 필터를 생성했습니다. 그리고 <strong>cpp_char_filter</strong> 캐릭터 필터와, whitespace 토크나이저, lowercase, stop, snowball 토큰필터들로 구성된 <strong>coding_analyzer</strong> 애널라이저를 생성해서 <strong>language</strong> 필드에 적용을 시켰습니다.</p>
<p>이제 <strong>C++</strong> 로 검색을 해 보면 <strong>C++</strong> 를 가지고 있는 도큐먼트 하나만 검색이 됩니다.</p>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> coding<span class="token operator">/</span>_search
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;language&quot;</span><span class="token operator">:</span> <span class="token string">&quot;C++&quot;</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>새로운 애널라이저 적용 후에 단어 <strong>C++</strong> 는 <code class="euiCode" data-code-language="text">+</code> 가 <code class="euiCode" data-code-language="text">_plus_</code> 로 변경된 <strong>C_plus__plus_</strong> 로 치환되어 색인이 됩니다. 이후 토크나이저 토큰필터를 거치며 새로운 역 인덱스 다음과 같이 생성됩니다.</p>
<p><figure class="euiImage euiImage--hasShadow euiImage--allowFullScreen euiImage--original"><button type="button" aria-label="Open fullscreen 새로운 설정에서 생성된 language 필드의 역 인덱스 image" class="euiImage__button" data-test-subj="activateFullScreenButton"><img src="/ZWxhc3RpYy9kb2NzLWtyL2VzZ3VpZGU3/assets/06-04_java_c_2.png" alt="새로운 설정에서 생성된 language 필드의 역 인덱스" class="euiImage__img" title="새로운 설정에서 생성된 language 필드의 역 인덱스"/><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium euiIcon--ghost euiIcon-isLoading euiImage__icon" focusable="false" role="img" aria-hidden="true"></svg></button></figure></p>
<p>match 쿼리로 검색을 하면 검색어 <strong>C++</strong> 역시 동일한 애널라이저가 적용되어 <strong>c_plus__plus_</strong> 로 바뀌어 검색됩니다. 그렇기 때문에 텀 <strong>c_plus__plus_</strong> 가 해당되는 <code class="euiCode" data-code-language="text">&quot;_id&quot; : &quot;3&quot;</code> 도큐먼트만 검색이 되게 됩니다.</p>
<h2 id="643-pattern-replace" style="position:relative"><a class="euiLink euiLink--primary docArticle__headerLink" href="#643-pattern-replace" rel="noreferrer" aria-label="6.4.3 Pattern Replace permalink"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="euiIcon euiIcon--medium" focusable="false" role="img" aria-hidden="true"><path d="M7.66 3.803a.5.5 0 11-.706-.707L9.268.78c1.187-1.187 3.242-1 4.596.354s1.54 3.409.354 4.596l-3.536 3.536c-1.187 1.187-3.242 1-4.596-.354a.5.5 0 11.707-.707c.99.99 2.417 1.119 3.182.354l3.536-3.536c.765-.765.635-2.193-.354-3.182-.99-.99-2.417-1.119-3.182-.354L7.661 3.803zm-.32 7.392a.5.5 0 11.707.707l-2.315 2.314c-1.187 1.188-3.242 1-4.596-.353-1.354-1.354-1.54-3.41-.353-4.596L4.318 5.73c1.187-1.187 3.242-1 4.596.354a.5.5 0 01-.707.707c-.989-.99-2.416-1.12-3.182-.354L1.49 9.974c-.766.765-.636 2.193.353 3.182.99.989 2.417 1.119 3.182.353l2.315-2.314z"></path></svg></a>6.4.3 Pattern Replace</h2>
<p>Pattern Replace 캐릭터 필터는 **정규식(Regular Expression)**을 이용해서 좀더 복잡한 패턴들을 치환할 수 있는 캐릭터 필터입니다. 다음은 **카멜 표기법(camelCase)**으로 된 단어를 대문자가 시작하는 단위 마다 공백을 삽입하여 세부 단어별로 토크나이징 될 수 있도록 <strong>camel</strong> 인덱스에 <strong>camel_analyzer</strong> 라는 애널라이저를 생성하는 예제입니다.</p>
<div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">PUT</span> camel
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;analysis&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;camel_analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;camel_filter&quot;</span>
</span><span class="euiCodeBlock__line">          <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">            <span class="token string">&quot;lowercase&quot;</span>
</span><span class="euiCodeBlock__line">          <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line">        <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">      <span class="token string">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">        <span class="token string">&quot;camel_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pattern_replace&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;pattern&quot;</span><span class="token operator">:</span> <span class="token string">&quot;(?&lt;=\\p{Lower})(?=\\p{Upper})&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">          <span class="token string">&quot;replacement&quot;</span><span class="token operator">:</span> <span class="token string">&quot; &quot;</span>
</span><span class="euiCodeBlock__line">        <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">      <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">    <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<p>이제 camel 인덱스에서 <strong>&quot;FooBazBar&quot;</strong> 라는 단어를 분석 해 보면 다음과 같이 <strong>foo</strong>, <strong>baz</strong>, <strong>bar</strong> 세개의 단어로 분리되는 것을 확인할 수 있습니다.</p>
<div class="euiTabs euiTabs--small euiTabs--bottomBorder" role="tablist"><button role="tab" aria-selected="true" type="button" class="euiTab euiTab-isSelected" name="request"><span class="euiTab__content">request</span></button><button role="tab" aria-selected="false" type="button" class="euiTab" name="response"><span class="euiTab__content">response</span></button></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div><div class="language-javascript euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingSmall"><pre class="euiCodeBlock__pre euiCodeBlock__pre--whiteSpacePre" tabindex="-1"><code class="euiCodeBlock__code" data-code-language="javascript"><span class="euiCodeBlock__line"><span class="token constant">GET</span> camel<span class="token operator">/</span>_analyze
</span><span class="euiCodeBlock__line"><span class="token punctuation">{</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;camel_analyzer&quot;</span><span class="token punctuation">,</span>
</span><span class="euiCodeBlock__line">  <span class="token string">&quot;text&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="euiCodeBlock__line">    <span class="token string">&quot;public void FooBazBar()&quot;</span>
</span><span class="euiCodeBlock__line">  <span class="token punctuation">]</span>
</span><span class="euiCodeBlock__line"><span class="token punctuation">}</span>
</span><span class="euiCodeBlock__line"></span></code></pre></div></div>
<div class="euiCallOut euiCallOut--warning docCallOut"><div class="euiText euiText--small"><div class="euiTextColor euiTextColor--default"><p>캐릭터 필터는 토크나이저가 적용되기 이전에 해당 필드 전체 내용을 치환하는 일종의 전처리 작업입니다. 유사한 기능을 구현하여 적용하더라도 뒤에 나올 토큰필터에서 텀을 처리하는 것과는 결과에 있어 position 같은 값들의 차이가 생깁니다.</p></div></div></div></div><div class="euiSpacer euiSpacer--l css-jz428s-euiSpacer-l"></div><div class="euiText euiText--small"><div class="euiTextColor euiTextColor--subdued">Last updated: Jan 25th, 2022</div></div></div></div></div></div></div></div><footer class="docChromeFooter" data-elastic-exclude="true"><div class="euiFlexGroup euiFlexGroup--justifyContentSpaceAround euiFlexGroup--directionRow euiFlexGroup--responsive"><div class="euiFlexItem euiFlexItem--flexGrowZero docChromeFooter__container"><div class="euiFlexGroup euiFlexGroup--gutterExtraLarge euiFlexGroup--justifyContentSpaceBetween euiFlexGroup--directionRow euiFlexGroup--responsive"><div class="euiFlexItem"><div class="euiText euiText--small"><div class="euiTextColor euiTextColor--ghost"><p>Elasticsearch is a trademark of Elasticsearch B.V., registered in the U.S. and in other countries.</p><p>Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the Apache Software Foundation in the United States and/or other countries.</p><p> <a class="euiLink euiLink--ghost" href="https://www.elastic.co/legal/trademarks" rel="">Trademarks</a><span class="docChromeFooter__divide">|</span><a class="euiLink euiLink--ghost" href="https://www.elastic.co/legal/terms-of-use" rel="">Terms of Use</a><span class="docChromeFooter__divide">|</span><a class="euiLink euiLink--ghost" href="https://www.elastic.co/legal/privacy-statement" rel="">Privacy</a><span class="docChromeFooter__divide">|</span>© <!-- -->2022<!-- --> Elasticsearch B.V. All Rights Reserved</p></div></div></div><div class="euiFlexItem euiFlexItem--flexGrowZero"></div><div class="euiFlexItem euiFlexItem--flexGrowZero"><figure class="euiImage docChromeFooter__logo"><img style="max-width:xs;max-height:xs;width:auto" src="/assets/images/logo-elastic-vertical-reverse.svg" class="euiImage__img" alt="Elastic logo"/></figure></div></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"bundle":"!function(e,n){\"object\"==typeof exports\u0026\u0026\"object\"==typeof module?module.exports=n(require(\"mdxJsReact\"),require(\"React\")):\"function\"==typeof define\u0026\u0026define.amd?define([\"mdxJsReact\",\"React\"],n):\"object\"==typeof exports?exports.MDXContent=n(require(\"mdxJsReact\"),require(\"React\")):e.MDXContent=n(e.mdxJsReact,e.React)}(this,((e,n)=\u003e(()=\u003e{\"use strict\";var t={24:e=\u003e{e.exports=n},825:n=\u003e{n.exports=e}},l={};function a(e){var n=l[e];if(void 0!==n)return n.exports;var r=l[e]={exports:{}};return t[e](r,r.exports,a),r.exports}a.n=e=\u003e{var n=e\u0026\u0026e.__esModule?()=\u003ee.default:()=\u003ee;return a.d(n,{a:n}),n},a.d=(e,n)=\u003e{for(var t in n)a.o(n,t)\u0026\u0026!a.o(e,t)\u0026\u0026Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.o=(e,n)=\u003eObject.prototype.hasOwnProperty.call(e,n),a.r=e=\u003e{\"undefined\"!=typeof Symbol\u0026\u0026Symbol.toStringTag\u0026\u0026Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var r={};return(()=\u003e{a.r(r),a.d(r,{default:()=\u003el});var e=a(825),n=a(24),t=a.n(n);const l=function(){var n=arguments.length\u003e0\u0026\u0026void 0!==arguments[0]?arguments[0]:{},l=Object.assign({},(0,e.useMDXComponents)(),n.components),a=l.wrapper;return a?t().createElement(a,n,t().createElement(r)):r();function r(){var l=Object.assign({p:\"p\",strong:\"strong\",code:\"code\",h2:\"h2\",pre:\"pre\",img:\"img\"},(0,e.useMDXComponents)(),n.components),a=l.DocTabs,r=l.DocTab,o=l.DocCallOut;return o||c(\"DocCallOut\",!0),r||c(\"DocTab\",!0),a||c(\"DocTabs\",!0),t().createElement(t().Fragment,null,t().createElement(l.p,null,\"캐릭터 필터는 텍스트 분석 중 가장 먼저 처리되는 과정으로 색인된 텍스트가 토크나이저에 의해 텀으로 분리되기 전에 전체 문장에 대해 적용되는 일종의 전처리 도구입니다. 이 책에서 설명하는 7.0 버전 기준으로 캐릭터 필터는 \",t().createElement(l.strong,null,\"HTML Strip\"),\", \",t().createElement(l.strong,null,\"Mapping\"),\", \",t().createElement(l.strong,null,\"Pattern Replace\"),\" 총 3개가 존재합니다. \",t().createElement(l.code,{display:\"inline\"},\"char_filter\"),\" 항목에 배열로 입력하며 하나만 적용하거나 차례대로 입력해서 3개를 모두 적용할 수도 있습니다.\"),\"\\n\",t().createElement(l.h2,{id:\"641-html-strip\"},\"6.4.1 HTML Strip\"),\"\\n\",t().createElement(l.p,null,\"입력된 텍스트가 HTML 인 경우 HTML 태그들을 제거하여 일반 텍스트로 만듭니다. \",t().createElement(l.code,{display:\"inline\"},\"\u003c\u003e\"),\"로 된 태그를 제거할 뿐 아니라 \",t().createElement(l.code,{display:\"inline\"},\"\u0026nbsp;\"),\" 같은 HTML 문법 용어들도 해석합니다. 입력 값은 \",t().createElement(l.code,{display:\"inline\"},\"html_strip\"),\" 입니다.\"),\"\\n\",t().createElement(l.p,null,\"다음은 HTML Strip 캐릭터 필터를 이용해서 \",t().createElement(l.code,{display:\"inline\"},\"\u003cp\u003eI\u0026apos;m so \u003cb\u003ehappy\u003c/b\u003e!\u003c/p\u003e\"),\" 문장을 처리 한 결과입니다.\"),\"\\n\",t().createElement(a,null,t().createElement(r,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'POST _analyze\\n{\\n  \"tokenizer\": \"keyword\",\\n  \"char_filter\": [\\n    \"html_strip\"\\n  ],\\n  \"text\": \"\u003cp\u003eI\u0026apos;m so \u003cb\u003ehappy\u003c/b\u003e!\u003c/p\u003e\"\\n}\\n'))),t().createElement(r,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"tokens\" : [\\n    {\\n      \"token\" : \"\"\"\\n\\nI\\'m so happy!\\n\\n\"\"\",\\n      \"start_offset\" : 0,\\n      \"end_offset\" : 32,\\n      \"type\" : \"word\",\\n      \"position\" : 0\\n    }\\n  ]\\n}\\n')))),\"\\n\",t().createElement(l.p,null,\"모든 태그들이 제거되고 해석되어 \",t().createElement(l.strong,null,'\"I\\'m so happy!\"'),\" 라는 문장으로 변경 된 것을 확인할 수 있습니다.\"),\"\\n\",t().createElement(o,{color:\"warning\"},t().createElement(l.p,null,\"애널라이저는 항상 최소 1개의 토크나이저를 필요로 하기 때문에 캐릭터 필터만 적용하면 오류가 발생합니다. 위 예제에서는 \",t().createElement(l.strong,null,\"keyword\"),\" 토크나이저를 같이 사용했습니다.\")),\"\\n\",t().createElement(l.h2,{id:\"642-mapping\"},\"6.4.2 Mapping\"),\"\\n\",t().createElement(l.p,null,\"Mapping 캐릭터 필터를 이용하면 지정한 단어를 다른 단어로 치환이 가능합니다. 특수문자 등을 포함하는 검색 기능을 구현하려는 경우 반드시 적용해야 해서 실제로 캐릭터 필터 중에는 가장 많이 쓰입니다. 다음 예제를 위해 \",t().createElement(l.strong,null,\"language\"),\" 필드에 값이 \",t().createElement(l.strong,null,\"Java\"),\", \",t().createElement(l.strong,null,\"C\"),\", \",t().createElement(l.strong,null,\"C++\"),\" 인 도큐먼트들이 있는 \",t().createElement(l.strong,null,\"coding\"),\" 인덱스를 생성 해 보겠습니다.\"),\"\\n\",t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'POST coding/_bulk\\n{\"index\":{\"_id\":\"1\"}}\\n{\"language\":\"Java\"}\\n{\"index\":{\"_id\":\"2\"}}\\n{\"language\":\"C\"}\\n{\"index\":{\"_id\":\"3\"}}\\n{\"language\":\"C++\"}\\n')),\"\\n\",t().createElement(l.p,null,\"이제 coding 인덱스에서 match 쿼리로 \",t().createElement(l.strong,null,\"C++\"),\" 을 검색 해 보겠습니다.\"),\"\\n\",t().createElement(a,null,t().createElement(r,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'GET coding/_search\\n{\\n  \"query\": {\\n    \"match\": {\\n      \"language\": \"C++\"\\n    }\\n  }\\n}\\n'))),t().createElement(r,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"took\" : 255,\\n  \"timed_out\" : false,\\n  \"_shards\" : {\\n    \"total\" : 1,\\n    \"successful\" : 1,\\n    \"skipped\" : 0,\\n    \"failed\" : 0\\n  },\\n  \"hits\" : {\\n    \"total\" : {\\n      \"value\" : 2,\\n      \"relation\" : \"eq\"\\n    },\\n    \"max_score\" : 0.47000363,\\n    \"hits\" : [\\n      {\\n        \"_index\" : \"coding\",\\n        \"_type\" : \"_doc\",\\n        \"_id\" : \"2\",\\n        \"_score\" : 0.47000363,\\n        \"_source\" : {\\n          \"language\" : \"C\"\\n        }\\n      },\\n      {\\n        \"_index\" : \"coding\",\\n        \"_type\" : \"_doc\",\\n        \"_id\" : \"3\",\\n        \"_score\" : 0.47000363,\\n        \"_source\" : {\\n          \"language\" : \"C++\"\\n        }\\n      }\\n    ]\\n  }\\n}\\n')))),\"\\n\",t().createElement(l.p,null,\"**C++**을 검색했는데 값이 \",t().createElement(l.strong,null,\"C\"),\", \",t().createElement(l.strong,null,\"C++\"),\" 인 두개의 도큐먼트가 결과로 나타났습니다. 검색어를 \",t().createElement(l.strong,null,\"C\"),\" 또는 \",t().createElement(l.strong,null,\"c\"),\"로 검색을 해 보아도 동일한 결과가 나타납니다. 도큐먼트가 색인 될 때 \",t().createElement(l.strong,null,\"standard\"),\" 애널라이저가 적용되면서 **C++**에서 특수문자 **+**는 제거 되고 \",t().createElement(l.strong,null,\"C\"),\"는 소문자로 처리 되면서 실제로 역 인덱는 \",t().createElement(l.strong,null,\"c\"),\" 가 저장됩니.\"),\"\\n\",t().createElement(l.p,null,t().createElement(l.img,{src:\"/ZWxhc3RpYy9kb2NzLWtyL2VzZ3VpZGU3/assets/06-04_java_c.png\",alt:\"language 필드의 역 인덱스\"})),\"\\n\",t().createElement(l.p,null,\"Match 쿼리로 검색했을 때 검색어 \",t().createElement(l.strong,null,\"C++\"),\" 도 마찬가지로 standard 애널라이저가 적용되어 \",t().createElement(l.strong,null,\"c\"),\" 로 검색을 수행하여 \",t().createElement(l.code,{display:\"inline\"},'\"_id\" : \"1\"'),\", \",t().createElement(l.code,{display:\"inline\"},'\"_id\" : \"2\"'),\" 인 도큐먼트들이 결과로 나타나게 됩니다. standard 뿐 아니라 대다수의 애널라이저들이 특수문자에 대해서는 불용어로 간주하고 제거 해 버리기 때문에 특수문자가 포함된 검색어들을 검색하려면 먼저 특수문자를 다른 문자로 치환해서 저장해야 합니다.\"),\"\\n\",t().createElement(l.p,null,t().createElement(l.strong,null,\"C++\"),\" 텀을 \",t().createElement(l.strong,null,\"cpp\"),\" 처럼 치환하는 방법도 있는데, 이 경우라면 검색될 가능성이 있는 특수문자를 포함하는 모든 텀을 치환 해 주어야 하기 때문에 다소 번거롭습니다. 여기서는 특수문자 \",t().createElement(l.code,{display:\"inline\"},\"+\"),\" 를 \",t().createElement(l.code,{display:\"inline\"},\"_plus_\"),\" 라는 단어로 치환해서 색인을 해 보도록 하겠습니다. coding 인덱스를 삭제하고 \",t().createElement(l.code,{display:\"inline\"},\"mapping\"),\" 캐릭터 필터를 이용해서 인덱스의 매핑을 새로 지정 한 뒤 앞의 _bulk 명령으로 입력했던 도큐먼트들을 다시 색인 해 보도록 합니다.\"),\"\\n\",t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'PUT coding\\n{\\n  \"settings\": {\\n    \"analysis\": {\\n      \"analyzer\": {\\n        \"coding_analyzer\": {\\n          \"char_filter\": [\\n            \"cpp_char_filter\"\\n          ],\\n          \"tokenizer\": \"whitespace\",\\n          \"filter\": [ \"lowercase\", \"stop\", \"snowball\" ]\\n        }\\n      },\\n      \"char_filter\": {\\n        \"cpp_char_filter\": {\\n          \"type\": \"mapping\",\\n          \"mappings\": [ \"+ =\u003e _plus_\", \"- =\u003e _minus_\" ]\\n        }\\n      }\\n    }\\n  },\\n  \"mappings\": {\\n    \"properties\": {\\n      \"language\": {\\n        \"type\": \"text\",\\n        \"analyzer\": \"coding_analyzer\"\\n      }\\n    }\\n  }\\n}\\n')),\"\\n\",t().createElement(l.p,null,t().createElement(l.img,{src:\"/ZWxhc3RpYy9kb2NzLWtyL2VzZ3VpZGU3/assets/06-04_custom_char_filter.png\",alt:\"사용자 정의 캐릭터 필터, 애널라이저 설정 후 language 필드에 적용\"})),\"\\n\",t().createElement(l.p,null,t().createElement(l.code,{display:\"inline\"},\"+\"),\" 기호는 \",t().createElement(l.code,{display:\"inline\"},\"_plus_\"),\" 로, \",t().createElement(l.code,{display:\"inline\"},\"-\"),\" 기호는 \",t().createElement(l.code,{display:\"inline\"},\"_minus_\"),\" 로 치환하는 \",t().createElement(l.strong,null,\"cpp_char_filter\"),\" 라는 캐릭터 필터를 생성했습니다. 그리고 \",t().createElement(l.strong,null,\"cpp_char_filter\"),\" 캐릭터 필터와, whitespace 토크나이저, lowercase, stop, snowball 토큰필터들로 구성된 \",t().createElement(l.strong,null,\"coding_analyzer\"),\" 애널라이저를 생성해서 \",t().createElement(l.strong,null,\"language\"),\" 필드에 적용을 시켰습니다.\"),\"\\n\",t().createElement(l.p,null,\"이제 \",t().createElement(l.strong,null,\"C++\"),\" 로 검색을 해 보면 \",t().createElement(l.strong,null,\"C++\"),\" 를 가지고 있는 도큐먼트 하나만 검색이 됩니다.\"),\"\\n\",t().createElement(a,null,t().createElement(r,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'GET coding/_search\\n{\\n  \"query\": {\\n    \"match\": {\\n      \"language\": \"C++\"\\n    }\\n  }\\n}\\n'))),t().createElement(r,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"took\" : 2,\\n  \"timed_out\" : false,\\n  \"_shards\" : {\\n    \"total\" : 1,\\n    \"successful\" : 1,\\n    \"skipped\" : 0,\\n    \"failed\" : 0\\n  },\\n  \"hits\" : {\\n    \"total\" : {\\n      \"value\" : 1,\\n      \"relation\" : \"eq\"\\n    },\\n    \"max_score\" : 0.9808292,\\n    \"hits\" : [\\n      {\\n        \"_index\" : \"coding\",\\n        \"_type\" : \"_doc\",\\n        \"_id\" : \"3\",\\n        \"_score\" : 0.9808292,\\n        \"_source\" : {\\n          \"language\" : \"C++\"\\n        }\\n      }\\n    ]\\n  }\\n}\\n')))),\"\\n\",t().createElement(l.p,null,\"새로운 애널라이저 적용 후에 단어 \",t().createElement(l.strong,null,\"C++\"),\" 는 \",t().createElement(l.code,{display:\"inline\"},\"+\"),\" 가 \",t().createElement(l.code,{display:\"inline\"},\"_plus_\"),\" 로 변경된 \",t().createElement(l.strong,null,\"C_plus__plus_\"),\" 로 치환되어 색인이 됩니다. 이후 토크나이저 토큰필터를 거치며 새로운 역 인덱스 다음과 같이 생성됩니다.\"),\"\\n\",t().createElement(l.p,null,t().createElement(l.img,{src:\"/ZWxhc3RpYy9kb2NzLWtyL2VzZ3VpZGU3/assets/06-04_java_c_2.png\",alt:\"새로운 설정에서 생성된 language 필드의 역 인덱스\"})),\"\\n\",t().createElement(l.p,null,\"match 쿼리로 검색을 하면 검색어 \",t().createElement(l.strong,null,\"C++\"),\" 역시 동일한 애널라이저가 적용되어 \",t().createElement(l.strong,null,\"c_plus__plus_\"),\" 로 바뀌어 검색됩니다. 그렇기 때문에 텀 \",t().createElement(l.strong,null,\"c_plus__plus_\"),\" 가 해당되는 \",t().createElement(l.code,{display:\"inline\"},'\"_id\" : \"3\"'),\" 도큐먼트만 검색이 되게 됩니다.\"),\"\\n\",t().createElement(l.h2,{id:\"643-pattern-replace\"},\"6.4.3 Pattern Replace\"),\"\\n\",t().createElement(l.p,null,\"Pattern Replace 캐릭터 필터는 **정규식(Regular Expression)**을 이용해서 좀더 복잡한 패턴들을 치환할 수 있는 캐릭터 필터입니다. 다음은 **카멜 표기법(camelCase)**으로 된 단어를 대문자가 시작하는 단위 마다 공백을 삽입하여 세부 단어별로 토크나이징 될 수 있도록 \",t().createElement(l.strong,null,\"camel\"),\" 인덱스에 \",t().createElement(l.strong,null,\"camel_analyzer\"),\" 라는 애널라이저를 생성하는 예제입니다.\"),\"\\n\",t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'PUT camel\\n{\\n  \"settings\": {\\n    \"analysis\": {\\n      \"analyzer\": {\\n        \"camel_analyzer\": {\\n          \"char_filter\": [\\n            \"camel_filter\"\\n          ],\\n          \"tokenizer\": \"standard\",\\n          \"filter\": [\\n            \"lowercase\"\\n          ]\\n        }\\n      },\\n      \"char_filter\": {\\n        \"camel_filter\": {\\n          \"type\": \"pattern_replace\",\\n          \"pattern\": \"(?\u003c=\\\\\\\\p{Lower})(?=\\\\\\\\p{Upper})\",\\n          \"replacement\": \" \"\\n        }\\n      }\\n    }\\n  }\\n}\\n')),\"\\n\",t().createElement(l.p,null,\"이제 camel 인덱스에서 \",t().createElement(l.strong,null,'\"FooBazBar\"'),\" 라는 단어를 분석 해 보면 다음과 같이 \",t().createElement(l.strong,null,\"foo\"),\", \",t().createElement(l.strong,null,\"baz\"),\", \",t().createElement(l.strong,null,\"bar\"),\" 세개의 단어로 분리되는 것을 확인할 수 있습니다.\"),\"\\n\",t().createElement(a,null,t().createElement(r,{name:\"request\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'GET camel/_analyze\\n{\\n  \"analyzer\": \"camel_analyzer\",\\n  \"text\": [\\n    \"public void FooBazBar()\"\\n  ]\\n}\\n'))),t().createElement(r,{name:\"response\"},t().createElement(l.pre,null,t().createElement(l.code,{className:\"language-javascript\",display:\"block\"},'{\\n  \"tokens\" : [\\n    {\\n      \"token\" : \"public\",\\n      \"start_offset\" : 0,\\n      \"end_offset\" : 6,\\n      \"type\" : \"\u003cALPHANUM\u003e\",\\n      \"position\" : 0\\n    },\\n    {\\n      \"token\" : \"void\",\\n      \"start_offset\" : 7,\\n      \"end_offset\" : 11,\\n      \"type\" : \"\u003cALPHANUM\u003e\",\\n      \"position\" : 1\\n    },\\n    {\\n      \"token\" : \"foo\",\\n      \"start_offset\" : 12,\\n      \"end_offset\" : 14,\\n      \"type\" : \"\u003cALPHANUM\u003e\",\\n      \"position\" : 2\\n    },\\n    {\\n      \"token\" : \"baz\",\\n      \"start_offset\" : 15,\\n      \"end_offset\" : 17,\\n      \"type\" : \"\u003cALPHANUM\u003e\",\\n      \"position\" : 3\\n    },\\n    {\\n      \"token\" : \"bar\",\\n      \"start_offset\" : 18,\\n      \"end_offset\" : 21,\\n      \"type\" : \"\u003cALPHANUM\u003e\",\\n      \"position\" : 4\\n    }\\n  ]\\n}\\n')))),\"\\n\",t().createElement(o,{color:\"warning\"},t().createElement(l.p,null,\"캐릭터 필터는 토크나이저가 적용되기 이전에 해당 필드 전체 내용을 치환하는 일종의 전처리 작업입니다. 유사한 기능을 구현하여 적용하더라도 뒤에 나올 토큰필터에서 텀을 처리하는 것과는 결과에 있어 position 같은 값들의 차이가 생깁니다.\")))}};function c(e,n){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+e+\"` to be defined: you likely forgot to import, pass, or provide it.\")}})(),r})()));","frontmatter":{"id":"esG7-06-04-char-filter","slug":"/krEsguide7/esG7-06-04-char-filter","title":"6.4 캐릭터 필터 - Character Filter","description":"모든 문서에 대한 저작권은 Elastic 과 김종민(kimjmin@gmail.com) 에게 있으며 허가되지 않은 무단 복제나 배포 및 출판을 금지합니다. 본 문서의 내용 및 포함된 자료를 인용하고자 하는 경우 출처를 명시하고 게재된 주소를 김종민(kimjmin@gmail.com)에게 알려주시기 바랍니다.","date":"2022-01-25T00:00:00.000Z","tags":["indexing","text","analysis","character filter","char_filter"],"link":"https://github.com/elastic/docs-kr/esguide7/blob/main","linkPath":"06-text-analysis/06-04-char-filter.mdx"},"missionId":"krEsguide7"},"__N_SSG":true},"page":"/[...slug]","query":{"slug":["krEsguide7","esG7-06-04-char-filter"]},"buildId":"AzE3g5BBfFWf9aUdpqGZ7","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>